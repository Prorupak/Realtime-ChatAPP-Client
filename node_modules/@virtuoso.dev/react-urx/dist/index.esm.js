import*as n from"react";import{createContext as r,forwardRef as e,useState as t,useImperativeHandle as u,createElement as o,useCallback as i,useContext as c}from"react";import{tap as f,init as a,curry1to0 as l,subscribe as s,reset as v,always as d,publish as p,eventHandler as m,curry2to1 as y,getValue as h}from"@virtuoso.dev/urx";var O=["children"],b="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function j(j,g,k){var x,E,R,P,q=Object.keys(null!=(x=g.required)?x:{}),C=Object.keys(null!=(E=g.optional)?E:{}),w=Object.keys(null!=(R=g.methods)?R:{}),L=Object.keys(null!=(P=g.events)?P:{}),V=r({});function z(n,r){void 0!==n.propsReady&&p(n.propsReady,!1);for(var e=0;e<q.length;e++){var t=q[e];p(n[g.required[t]],r[t])}for(var u=0;u<C.length;u++){var o=C[u];o in r&&p(n[g.optional[o]],r[o])}void 0!==n.propsReady&&p(n.propsReady,!0)}function A(n){return L.reduce(function(r,e){return r[e]=m(n[g.events[e]]),r},{})}return{Component:e(function(n,r){var e=n.children,i=function(n,r){if(null==n)return{};var e,t,u={},o=Object.keys(n);for(t=0;t<o.length;t++)r.indexOf(e=o[t])>=0||(u[e]=n[e]);return u}(n,O),c=t(function(){return f(a(j),function(n){return z(n,i)})}),m=c[0],y=t(l(A,m))[0];return b(function(){for(var n=0;n<L.length;n++){var r=L[n];r in i&&s(y[r],i[r])}return function(){Object.values(y).map(v)}},[i,y,m]),b(function(){z(m,i)}),u(r,d(function(n){return w.reduce(function(r,e){return r[e]=function(r){p(n[g.methods[e]],r)},r},{})}(m))),o(V.Provider,{value:m},void 0!==k?o(k,function(n,r){for(var e={},t={},u=0,o=n.length;u<o;)t[n[u]]=1,u+=1;for(var i in r)Object.prototype.hasOwnProperty.call(t,i)||(e[i]=r[i]);return e}([].concat(q,C,L),i),e):e)}),usePublisher:function(r){return i(y(p,n.useContext(V)[r]),[r])},useEmitterValue:function(n){var r=c(V)[n],e=t(l(h,r)),u=e[0],o=e[1];return b(function(){return s(r,function(n){n!==u&&o(d(n))})},[r,u]),u},useEmitter:function(n,r){var e=c(V)[n];b(function(){return s(e,r)},[r,e])}}}export{j as systemToComponent};
//# sourceMappingURL=index.esm.js.map
