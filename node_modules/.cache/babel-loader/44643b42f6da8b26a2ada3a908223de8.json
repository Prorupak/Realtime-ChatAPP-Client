{"ast":null,"code":"import _regeneratorRuntime from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Avatar,useChatContext}from'stream-chat-react';import{InviteIcon}from'../assets';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListContainer=function ListContainer(_ref){var children=_ref.children;return/*#__PURE__*/_jsxs(\"div\",{className:\"user-list__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-list__header\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"User\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Invite\"})]}),children]});};var UserItem=function UserItem(_ref2){var user=_ref2.user,setSelectedUsers=_ref2.setSelectedUsers;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var handleSelect=function handleSelect(){if(selected){setSelectedUsers(function(prevUsers){return prevUsers.filter(function(prevUser){return prevUser!==user.id;});});}else{setSelectedUsers(function(prevUsers){return[].concat(_toConsumableArray(prevUsers),[user.id]);});}setSelected(function(prevSelected){return!prevSelected;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-item__wrapper\",onClick:handleSelect,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-item__name-wrapper\",children:[/*#__PURE__*/_jsx(Avatar,{image:user.image,name:user.fullName||user.id,size:32}),/*#__PURE__*/_jsx(\"p\",{className:\"user-item__name\",children:user.fullName||user.id})]}),selected?/*#__PURE__*/_jsx(InviteIcon,{}):/*#__PURE__*/_jsx(\"div\",{className:\"user-item__invite-empty\"})]});};var UserList=function UserList(_ref3){var setSelectedUsers=_ref3.setSelectedUsers;var _useChatContext=useChatContext(),client=_useChatContext.client;var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),listEmpty=_useState8[0],setListEmpty=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];useEffect(function(){var getUsers=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!loading){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);_context.prev=3;_context.next=6;return client.queryUsers({id:{$ne:client.userID}},{id:1},{limit:8});case 6:response=_context.sent;if(response.users.length){setUsers(response.users);}else{setListEmpty(true);}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);setError(true);case 13:setLoading(false);case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function getUsers(){return _ref4.apply(this,arguments);};}();if(client)getUsers();},[]);if(error){return/*#__PURE__*/_jsx(ListContainer,{children:/*#__PURE__*/_jsx(\"div\",{className:\"user-list__message\",children:\"Error loading, please refresh and try again.\"})});}if(listEmpty){return/*#__PURE__*/_jsx(ListContainer,{children:/*#__PURE__*/_jsx(\"div\",{className:\"user-list__message\",children:\"No users found.\"})});}return/*#__PURE__*/_jsx(ListContainer,{children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"user-list__message\",children:\"Loading users...\"}):users===null||users===void 0?void 0:users.map(function(user,i){return/*#__PURE__*/_jsx(UserItem,{index:i,user:user,setSelectedUsers:setSelectedUsers},user.id);})});};export default UserList;","map":{"version":3,"sources":["/home/rupak/Music/project_medical_pager_chat-master/client/src/components/UserList.jsx"],"names":["React","useEffect","useState","Avatar","useChatContext","InviteIcon","ListContainer","children","UserItem","user","setSelectedUsers","selected","setSelected","handleSelect","prevUsers","filter","prevUser","id","prevSelected","image","fullName","UserList","client","users","setUsers","loading","setLoading","listEmpty","setListEmpty","error","setError","getUsers","queryUsers","$ne","userID","limit","response","length","map","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Avatar, useChatContext } from 'stream-chat-react';\n\nimport { InviteIcon } from '../assets';\n\nconst ListContainer = ({ children }) => {\n    return (\n        <div className=\"user-list__container\">\n            <div className=\"user-list__header\">\n                <p>User</p>\n                <p>Invite</p>\n            </div>\n            {children}\n        </div>\n    )\n}\n\nconst UserItem = ({ user, setSelectedUsers }) => {\n    const [selected, setSelected] = useState(false)\n\n    const handleSelect = () => {\n        if(selected) {\n            setSelectedUsers((prevUsers) => prevUsers.filter((prevUser) => prevUser !== user.id))\n        } else {\n            setSelectedUsers((prevUsers) => [...prevUsers, user.id])\n        }\n\n        setSelected((prevSelected) => !prevSelected)\n    }\n\n    return (\n        <div className=\"user-item__wrapper\" onClick={handleSelect}>\n            <div className=\"user-item__name-wrapper\">\n                <Avatar image={user.image} name={user.fullName || user.id} size={32} />\n                <p className=\"user-item__name\">{user.fullName || user.id}</p>\n            </div>\n            {selected ? <InviteIcon /> : <div className=\"user-item__invite-empty\" />}\n        </div>\n    )\n}\n\n\nconst UserList = ({ setSelectedUsers }) => {\n    const { client } = useChatContext();\n    const [users, setUsers] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [listEmpty, setListEmpty] = useState(false);\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        const getUsers = async () => {\n            if(loading) return;\n\n            setLoading(true);\n            \n            try {\n                const response = await client.queryUsers(\n                    { id: { $ne: client.userID } },\n                    { id: 1 },\n                    { limit: 8 } \n                );\n\n                if(response.users.length) {\n                    setUsers(response.users);\n                } else {\n                    setListEmpty(true);\n                }\n            } catch (error) {\n               setError(true);\n            }\n            setLoading(false);\n        }\n\n        if(client) getUsers()\n    }, []);\n\n    if(error) {\n        return (\n            <ListContainer>\n                <div className=\"user-list__message\">\n                    Error loading, please refresh and try again.\n                </div>\n            </ListContainer>\n        )\n    }\n\n    if(listEmpty) {\n        return (\n            <ListContainer>\n                <div className=\"user-list__message\">\n                    No users found.\n                </div>\n            </ListContainer>\n        )\n    }\n\n    return (\n        <ListContainer>\n            {loading ? <div className=\"user-list__message\">\n                Loading users...\n            </div> : (\n                users?.map((user, i) => (\n                  <UserItem index={i} key={user.id} user={user} setSelectedUsers={setSelectedUsers} />  \n                ))\n            )}\n        </ListContainer>\n    )\n}\n\nexport default UserList;"]},"metadata":{},"sourceType":"module"}