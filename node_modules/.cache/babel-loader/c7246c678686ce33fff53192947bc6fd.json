{"ast":null,"code":"import React, { Children, cloneElement, useState, useCallback, useRef, useEffect, useMemo } from 'react';\nimport parseXml from '@rgrove/parse-xml';\nimport dayjs from 'dayjs';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\nimport ReactMarkdown from 'react-markdown';\nimport { find } from 'linkifyjs';\nimport IcalExpander from 'ical-expander';\nimport { Virtuoso } from 'react-virtuoso';\nimport isBetween from 'dayjs/plugin/isBetween';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar runtime_1 = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2014-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  var runtime = function (exports) {\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined$1; // More compressible than void 0.\n\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n    function define(obj, key, value) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n      return obj[key];\n    }\n\n    try {\n      // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n      define({}, \"\");\n    } catch (err) {\n      define = function define(obj, key, value) {\n        return obj[key] = value;\n      };\n    }\n\n    function wrap(innerFn, outerFn, self, tryLocsList) {\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n      // .throw, and .return methods.\n\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\n      return generator;\n    }\n\n    exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n    // record like context.tryEntries[i].completion. This interface could\n    // have been (and was previously) designed to take a closure to be\n    // invoked without arguments, but in all the cases we care about we\n    // already have an existing method we want to call, so there's no need\n    // to create a new function object. We can even get away with assuming\n    // the method takes exactly one argument, since that happens to be true\n    // in every case, so we don't have to touch the arguments object. The\n    // only additional allocation required is the completion record, which\n    // has a stable shape and so hopefully should be cheap to allocate.\n\n    function tryCatch(fn, obj, arg) {\n      try {\n        return {\n          type: \"normal\",\n          arg: fn.call(obj, arg)\n        };\n      } catch (err) {\n        return {\n          type: \"throw\",\n          arg: err\n        };\n      }\n    }\n\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n    // breaking out of the dispatch switch statement.\n\n    var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n    // .constructor.prototype properties for functions that return Generator\n    // objects. For full spec compliance, you may wish to configure your\n    // minifier not to mangle the names of these two functions.\n\n    function Generator() {}\n\n    function GeneratorFunction() {}\n\n    function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n    // don't natively support it.\n\n\n    var IteratorPrototype = {};\n\n    IteratorPrototype[iteratorSymbol] = function () {\n      return this;\n    };\n\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      // This environment has a native %IteratorPrototype%; use it instead\n      // of the polyfill.\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\n    GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"); // Helper for defining the .next, .throw, and .return methods of the\n    // Iterator interface in terms of a single ._invoke method.\n\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function (method) {\n        define(prototype, method, function (arg) {\n          return this._invoke(method, arg);\n        });\n      });\n    }\n\n    exports.isGeneratorFunction = function (genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n      // do is to check its .name property.\n      (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n\n    exports.mark = function (genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n        define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n      }\n\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    }; // Within the body of any async function, `await x` is transformed to\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n    // meant to be awaited.\n\n\n    exports.awrap = function (arg) {\n      return {\n        __await: arg\n      };\n    };\n\n    function AsyncIterator(generator, PromiseImpl) {\n      function invoke(method, arg, resolve, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n\n          if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n            return PromiseImpl.resolve(value.__await).then(function (value) {\n              invoke(\"next\", value, resolve, reject);\n            }, function (err) {\n              invoke(\"throw\", err, resolve, reject);\n            });\n          }\n\n          return PromiseImpl.resolve(value).then(function (unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration.\n            result.value = unwrapped;\n            resolve(result);\n          }, function (error) {\n            // If a rejected Promise was yielded, throw the rejection back\n            // into the async generator function so it can be handled there.\n            return invoke(\"throw\", error, resolve, reject);\n          });\n        }\n      }\n\n      var previousPromise;\n\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n\n        return previousPromise = // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      } // Define the unified helper method that is used to implement .next,\n      // .throw, and .return (see defineIteratorMethods).\n\n\n      this._invoke = enqueue;\n    }\n\n    defineIteratorMethods(AsyncIterator.prototype);\n\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n      return this;\n    };\n\n    exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n    // AsyncIterator objects; they just return a Promise for the value of\n    // the final result produced by the iterator.\n\n    exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n      if (PromiseImpl === void 0) PromiseImpl = Promise;\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n      return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function (result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n\n    function makeInvokeMethod(innerFn, self, context) {\n      var state = GenStateSuspendedStart;\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          } // Be forgiving, per 25.3.3.3.3 of the spec:\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n          return doneResult();\n        }\n\n        context.method = method;\n        context.arg = arg;\n\n        while (true) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (context.method === \"next\") {\n            // Setting context._sent for legacy support of Babel's\n            // function.sent implementation.\n            context.sent = context._sent = context.arg;\n          } else if (context.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context.arg;\n            }\n\n            context.dispatchException(context.arg);\n          } else if (context.method === \"return\") {\n            context.abrupt(\"return\", context.arg);\n          }\n\n          state = GenStateExecuting;\n          var record = tryCatch(innerFn, self, context);\n\n          if (record.type === \"normal\") {\n            // If an exception is thrown from innerFn, we leave state ===\n            // GenStateExecuting and loop back for another invocation.\n            state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted; // Dispatch the exception by looping back around to the\n            // context.dispatchException(context.arg) call above.\n\n            context.method = \"throw\";\n            context.arg = record.arg;\n          }\n        }\n      };\n    } // Call delegate.iterator[context.method](context.arg) and handle the\n    // result, either by returning a { value, done } result from the\n    // delegate iterator, or by modifying context.method and context.arg,\n    // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n    function maybeInvokeDelegate(delegate, context) {\n      var method = delegate.iterator[context.method];\n\n      if (method === undefined$1) {\n        // A .throw or .return when the delegate iterator has no .throw\n        // method always terminates the yield* loop.\n        context.delegate = null;\n\n        if (context.method === \"throw\") {\n          // Note: [\"return\"] must be used for ES3 parsing compatibility.\n          if (delegate.iterator[\"return\"]) {\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            context.method = \"return\";\n            context.arg = undefined$1;\n            maybeInvokeDelegate(delegate, context);\n\n            if (context.method === \"throw\") {\n              // If maybeInvokeDelegate(context) changed context.method from\n              // \"return\" to \"throw\", let that override the TypeError below.\n              return ContinueSentinel;\n            }\n          }\n\n          context.method = \"throw\";\n          context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n\n        return ContinueSentinel;\n      }\n\n      var record = tryCatch(method, delegate.iterator, context.arg);\n\n      if (record.type === \"throw\") {\n        context.method = \"throw\";\n        context.arg = record.arg;\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      var info = record.arg;\n\n      if (!info) {\n        context.method = \"throw\";\n        context.arg = new TypeError(\"iterator result is not an object\");\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      if (info.done) {\n        // Assign the result of the finished delegate to the temporary\n        // variable specified by delegate.resultName (see delegateYield).\n        context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n        context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n        // exception, let the outer generator proceed normally. If\n        // context.method was \"next\", forget context.arg since it has been\n        // \"consumed\" by the delegate iterator. If context.method was\n        // \"return\", allow the original .return call to continue in the\n        // outer generator.\n\n        if (context.method !== \"return\") {\n          context.method = \"next\";\n          context.arg = undefined$1;\n        }\n      } else {\n        // Re-yield the result returned by the delegate method.\n        return info;\n      } // The delegate iterator is finished, so forget it and continue with\n      // the outer generator.\n\n\n      context.delegate = null;\n      return ContinueSentinel;\n    } // Define Generator.prototype.{next,throw,return} in terms of the\n    // unified ._invoke helper method.\n\n\n    defineIteratorMethods(Gp);\n    define(Gp, toStringTagSymbol, \"Generator\"); // A Generator should always return itself as the iterator object when the\n    // @@iterator function is called on it. Some browsers' implementations of the\n    // iterator prototype chain incorrectly implement this, causing the Generator\n    // object to not be returned from this call. This ensures that doesn't happen.\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n    Gp[iteratorSymbol] = function () {\n      return this;\n    };\n\n    Gp.toString = function () {\n      return \"[object Generator]\";\n    };\n\n    function pushTryEntry(locs) {\n      var entry = {\n        tryLoc: locs[0]\n      };\n\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n\n      this.tryEntries.push(entry);\n    }\n\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n\n    function Context(tryLocsList) {\n      // The root entry object (effectively a try statement without a catch\n      // or a finally block) gives us a place to store values thrown from\n      // locations where there is no enclosing try statement.\n      this.tryEntries = [{\n        tryLoc: \"root\"\n      }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n\n    exports.keys = function (object) {\n      var keys = [];\n\n      for (var key in object) {\n        keys.push(key);\n      }\n\n      keys.reverse(); // Rather than returning an object with a next method, we keep\n      // things simple and return the next function itself.\n\n      return function next() {\n        while (keys.length) {\n          var key = keys.pop();\n\n          if (key in object) {\n            next.value = key;\n            next.done = false;\n            return next;\n          }\n        } // To avoid creating an additional object, we just hang the .value\n        // and .done properties off the next function object itself. This\n        // also ensures that the minifier will not anonymize the function.\n\n\n        next.done = true;\n        return next;\n      };\n    };\n\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n\n        if (!isNaN(iterable.length)) {\n          var i = -1,\n              next = function next() {\n            while (++i < iterable.length) {\n              if (hasOwn.call(iterable, i)) {\n                next.value = iterable[i];\n                next.done = false;\n                return next;\n              }\n            }\n\n            next.value = undefined$1;\n            next.done = true;\n            return next;\n          };\n\n          return next.next = next;\n        }\n      } // Return an iterator with no values.\n\n\n      return {\n        next: doneResult\n      };\n    }\n\n    exports.values = values;\n\n    function doneResult() {\n      return {\n        value: undefined$1,\n        done: true\n      };\n    }\n\n    Context.prototype = {\n      constructor: Context,\n      reset: function reset(skipTempReset) {\n        this.prev = 0;\n        this.next = 0; // Resetting context._sent for legacy support of Babel's\n        // function.sent implementation.\n\n        this.sent = this._sent = undefined$1;\n        this.done = false;\n        this.delegate = null;\n        this.method = \"next\";\n        this.arg = undefined$1;\n        this.tryEntries.forEach(resetTryEntry);\n\n        if (!skipTempReset) {\n          for (var name in this) {\n            // Not sure about the optimal order of these conditions:\n            if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n              this[name] = undefined$1;\n            }\n          }\n        }\n      },\n      stop: function stop() {\n        this.done = true;\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n\n        return this.rval;\n      },\n      dispatchException: function dispatchException(exception) {\n        if (this.done) {\n          throw exception;\n        }\n\n        var context = this;\n\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context.next = loc;\n\n          if (caught) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            context.method = \"next\";\n            context.arg = undefined$1;\n          }\n\n          return !!caught;\n        }\n\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n\n          if (entry.tryLoc === \"root\") {\n            // Exception thrown outside of any try block that could handle\n            // it, so set the completion value of the entire function to\n            // throw the exception.\n            return handle(\"end\");\n          }\n\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n      abrupt: function abrupt(type, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n\n        if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          // Ignore the finally entry if control is not jumping to a\n          // location outside the try/catch block.\n          finallyEntry = null;\n        }\n\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type;\n        record.arg = arg;\n\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n\n        return this.complete(record);\n      },\n      complete: function complete(record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n\n        return ContinueSentinel;\n      },\n      finish: function finish(finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n      \"catch\": function _catch(tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n\n            return thrown;\n          }\n        } // The context.catch method must only be called with a location\n        // argument that corresponds to a known catch block.\n\n\n        throw new Error(\"illegal catch attempt\");\n      },\n      delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName: resultName,\n          nextLoc: nextLoc\n        };\n\n        if (this.method === \"next\") {\n          // Deliberately forget the last sent value so that we don't\n          // accidentally pass it on to the delegate.\n          this.arg = undefined$1;\n        }\n\n        return ContinueSentinel;\n      }\n    }; // Regardless of whether this script is executing as a CommonJS module\n    // or not, return the runtime object so that we can declare the variable\n    // regeneratorRuntime in the outer scope, which allows this module to be\n    // injected easily by `bin/regenerator --include-runtime script.js`.\n\n    return exports;\n  }( // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  module.exports);\n\n  try {\n    regeneratorRuntime = runtime;\n  } catch (accidentalStrictMode) {\n    // This module should not be running in strict mode, so the above\n    // assignment should always work unless something is misconfigured. Just\n    // in case runtime.js accidentally runs in strict mode, we can escape\n    // strict mode using a global Function call. This could conceivably fail\n    // if a Content Security Policy forbids using Function, but in that case\n    // the proper solution is to fix the accidental strict mode problem. If\n    // you've misconfigured your bundler to force strict mode and applied a\n    // CSP to forbid Function, and you're not willing to fix either of those\n    // problems, please detail your unique predicament in a GitHub issue.\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n});\n\nfunction isXmlElement(node) {\n  return !!node.children;\n}\n/**\r\n * MMLTag - Xml tag converted to this MMLTag\r\n */\n\n\nvar MMLTag = /*#__PURE__*/function () {\n  function MMLTag(name, node, children) {\n    this.name = name;\n    this.node = node;\n    this.attributes = this.node.attributes || {};\n    this.children = children;\n  }\n\n  var _proto = MMLTag.prototype;\n\n  _proto.getText = function getText() {\n    if (this.node.type === 'text') return this.node.text;else if (isXmlElement(this.node) && this.node.children.length) return this.node.children[0].text;\n    return '';\n  };\n\n  _proto.initialState = function initialState() {\n    var _ref;\n\n    var _this$attributes = this.attributes,\n        name = _this$attributes.name,\n        value = _this$attributes.value;\n    if (name) return _ref = {}, _ref[name] = value, _ref;\n    return {};\n  };\n\n  return MMLTag;\n}();\n\nvar Card = function Card(_ref) {\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      children = _ref.children;\n  return React.createElement(\"div\", {\n    className: \"mml-card \" + className\n  }, children);\n};\n\nvar Icon = function Icon(_ref) {\n  var name = _ref.name;\n  return React.createElement(\"i\", {\n    className: \"mml-icon material-icons\"\n  }, name);\n};\n\nvar CardHeader = function CardHeader(_ref) {\n  var text = _ref.text,\n      _ref$icon = _ref.icon,\n      icon = _ref$icon === void 0 ? '' : _ref$icon,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className;\n  return React.createElement(\"div\", {\n    className: \"mml-card-header \" + className\n  }, icon && React.createElement(Icon, {\n    name: icon\n  }), React.createElement(\"span\", {\n    className: \"mml-card-header__text\"\n  }, text));\n};\n\nvar CardBody = function CardBody(_ref) {\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      children = _ref.children;\n  return React.createElement(\"div\", {\n    className: \"mml-card-body \" + className\n  }, children);\n};\n/**\r\n * A list of buttons\r\n */\n\n\nvar ButtonList = function ButtonList(_ref) {\n  var children = _ref.children,\n      _ref$variant = _ref.variant,\n      variant = _ref$variant === void 0 ? '' : _ref$variant;\n  return React.createElement(\"div\", {\n    className: \"mml-btnlist \" + (variant === 'floating' ? ' mml-btnlist--floating' : 'mml-btnlist--grounded')\n  }, children);\n};\n/**\r\n * Utility to have custom svg icons outside the `material-icons` system provided by the Icon component\r\n * Use case internal to this library is the AddToCalendar component which needs brand icons which are not\r\n * included in [the default material-icons set and probably never will be](https://git.io/Jk9yH)\r\n */\n\n\nvar SvgIcon = function SvgIcon(_ref) {\n  var path = _ref.path;\n  return React.createElement(\"i\", {\n    className: \"mml-icon\"\n  }, React.createElement(\"svg\", {\n    className: \"mml-icon__svg\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, React.createElement(\"path\", {\n    d: path\n  })));\n};\n/** Icon path from https://materialdesignicons.com/ */\n\n\nvar IconGoogle = /*#__PURE__*/React.createElement(SvgIcon, {\n  path: \"M21.35 11.1h-9.17v2.73h6.5c-.33 3.8-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27 3.1 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10 5.35 0 9.25-3.67 9.25-9.1 0-1.15-.15-1.8-.15-1.8h0z\"\n});\n/** Icon path from https://materialdesignicons.com/ */\n\nvar IconMicrosoft = /*#__PURE__*/React.createElement(SvgIcon, {\n  path: \"M3 12V6.75l6-1.32v6.48L3 12m17-9v8.75l-10 .15V5.2L20 3M3 13l6 .1v6.8l-6-1.15V13m17 .25V22l-10-1.9v-7l10 .15z\"\n});\n/** Icon path from https://materialdesignicons.com/ */\n\nvar IconApple = /*#__PURE__*/React.createElement(SvgIcon, {\n  path: \"M18.7 19.5c-.83 1.24-1.7 2.45-3.05 2.47-1.34.03-1.77-.8-3.3-.8-1.53 0-2 .77-3.27.82-1.3.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.4c.87-1.52 2.43-2.48 4.12-2.5 1.28-.02 2.5.87 3.3.87.78 0 2.26-1.07 3.8-.9.65.03 2.47.26 3.64 1.98-.1.06-2.17 1.28-2.15 3.8.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.2-.7.85-1.83 1.5-2.95 1.42-.15-1.15.4-2.35 1.05-3.1z\"\n});\n\nfunction isMobile() {\n  var ua = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n  if (!ua) return false;\n  var mobileRE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;\n  if (mobileRE.test(ua)) return true;\n  if (typeof navigator !== 'undefined' && navigator.maxTouchPoints > 1 && ua.indexOf('Macintosh') !== -1 && ua.indexOf('Safari') !== -1) return true;\n  return false;\n} // @ts-ignore (expect-error breaks in GH actions) TODO: replace deprecated method\n\n\nvar isIE = typeof window !== 'undefined' && window.navigator.msSaveOrOpenBlob && window.Blob;\n\nvar getCurrentURL = function getCurrentURL() {\n  if (typeof window !== 'undefined') return window.location.href;\n  return '';\n};\n\nvar CALENDAR_SERVICES = [{\n  id: 'google',\n  label: 'Google',\n  Icon: IconGoogle\n}, {\n  id: 'apple',\n  label: 'Apple Calendar',\n  Icon: IconApple\n}, {\n  id: 'outlook',\n  label: 'Outlook',\n  Icon: IconMicrosoft\n}, {\n  id: 'outlookcom',\n  label: 'Outlook.com',\n  Icon: IconMicrosoft\n}];\n/**\r\n * Format time\r\n *\r\n * Adapted from the `moment` way of [react-add-to-calendar](https://git.io/JkWol)\r\n * to the dayjs way\r\n */\n\nfunction formatTime(date, id) {\n  return dayjs(date).format(id === 'outlookcom' ? 'YYYY-MM-DDTHH:mm:ss' : 'YYYYMMDDTHHmmss') + 'Z';\n}\n/**\r\n * Create query string with given parameters\r\n *\r\n * It checks that the parameter value is not falsy\r\n */\n\n\nfunction createQueryString(params) {\n  if (params === void 0) {\n    params = {};\n  }\n\n  return Object.keys(params).reduce(function (acc, key) {\n    var value = params[key];\n    if (value) acc += \"&\" + key + \"=\" + encodeURIComponent(value);\n    return acc;\n  }, '');\n}\n/**\r\n * Build calendar URL\r\n *\r\n * Resources:\r\n * - [SO question about Google](https://stackoverflow.com/q/22757908)\r\n * - [docs about outlook.com format](https://git.io/JkWp5)\r\n * - [addevent wrapper SaaS](https://www.addevent.com/)\r\n */\n\n\nfunction buildUrl(event, id) {\n  var start = event.start,\n      end = event.end,\n      title = event.title,\n      location = event.location,\n      description = event.description;\n  var startFormatted = formatTime(start, id);\n  var endFormatted = formatTime(end, id);\n  if (id === 'google') return \"https://calendar.google.com/calendar/render?action=TEMPLATE&dates=\" + startFormatted + \"/\" + endFormatted + createQueryString({\n    location: location,\n    text: title,\n    details: description\n  });\n  if (id === 'outlookcom') return \"https://outlook.live.com/owa/?rru=addevent\" + createQueryString({\n    startdt: startFormatted,\n    enddt: endFormatted,\n    subject: title,\n    location: location,\n    body: description,\n    allday: 'false'\n  }) + \"&path=/calendar/view/Month\";\n  var url = ['BEGIN:VCALENDAR', 'VERSION:2.0', 'BEGIN:VEVENT', 'URL:' + getCurrentURL(), 'DTSTART:' + startFormatted, 'DTEND:' + endFormatted, 'SUMMARY:' + title, 'DESCRIPTION:' + description, 'LOCATION:' + location, 'END:VEVENT', 'END:VCALENDAR'].join('\\n');\n  if (!isIE && isMobile()) url = encodeURI('data:text/calendar;charset=utf8,' + url);\n  return url;\n}\n/**\r\n * AddToCalendar widget that supports google, apple and outlook calendars\r\n */\n\n\nvar AddToCalendar = function AddToCalendar(_ref2) {\n  var title = _ref2.title,\n      start = _ref2.start,\n      end = _ref2.end,\n      _ref2$className = _ref2.className,\n      className = _ref2$className === void 0 ? '' : _ref2$className,\n      _ref2$location = _ref2.location,\n      location = _ref2$location === void 0 ? '' : _ref2$location,\n      _ref2$description = _ref2.description,\n      description = _ref2$description === void 0 ? '' : _ref2$description;\n  var event = {\n    start: start,\n    end: end,\n    title: title,\n    location: location,\n    description: description\n  };\n\n  function handleLinkClick(event) {\n    event.preventDefault();\n    var url = event.currentTarget.getAttribute('href');\n\n    if (!isMobile() && (url.startsWith('data') || url.startsWith('BEGIN'))) {\n      var filename = 'download.ics';\n      var blob = new Blob([url], {\n        type: 'text/calendar;charset=utf-8'\n      });\n\n      if (isIE) {\n        // @ts-ignore (expect-error breaks in GH actions) TODO: replace deprecated method\n        window.navigator.msSaveOrOpenBlob(blob, filename);\n      } else {\n        // many browsers do not properly support downloading data URIs\n        // (even with \"download\" attribute in use) so this solution\n        // ensures the event will download cross-browser\n        var link = document.createElement('a');\n        link.href = window.URL.createObjectURL(blob);\n        link.setAttribute('download', filename);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      }\n    } else {\n      window.open(url, '_blank');\n    }\n  }\n\n  return React.createElement(Card, {\n    className: \"mml-add-to-calendar \" + className\n  }, React.createElement(CardHeader, {\n    icon: \"date_range\",\n    text: \"Add to My Calendar\"\n  }), React.createElement(CardBody, null, React.createElement(ButtonList, null, CALENDAR_SERVICES.map(function (_ref3) {\n    var id = _ref3.id,\n        label = _ref3.label,\n        Icon = _ref3.Icon;\n    return React.createElement(\"a\", {\n      key: id,\n      className: \"mml-btn \" + (Icon ? 'mml-btn--with-icon' : ''),\n      onClick: handleLinkClick,\n      href: buildUrl(event, id),\n      target: \"_blank\",\n      rel: \"nofollow noreferrer noopener\"\n    }, Icon, \" \", label);\n  }))));\n};\n/**\r\n * Button can be used to open a URL, submit the form or trigger a select when clicked\r\n */\n\n\nvar Button = function Button(_ref) {\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      text = _ref.text,\n      name = _ref.name,\n      value = _ref.value,\n      _ref$url = _ref.url,\n      url = _ref$url === void 0 ? '' : _ref$url,\n      variant = _ref.variant,\n      icon = _ref.icon;\n\n  if (icon) {\n    className += text ? ' mml-btn--with-icon' : ' mml-btn--icon';\n  } else {\n    className += ' mml-btn--text';\n  }\n\n  className += variant === 'floating' ? ' mml-btn--floating' : ' mml-btn--grounded';\n  if (url) return React.createElement(\"a\", {\n    className: \"mml-btn \" + className,\n    href: sanitizeUrl(url),\n    target: \"_blank\",\n    rel: \"nofollow noreferrer noopener\"\n  }, icon && React.createElement(Icon, {\n    name: icon\n  }), text);\n  return React.createElement(\"button\", {\n    className: \"mml-btn \" + className,\n    type: \"submit\",\n    name: name,\n    value: value,\n    onClick: function onClick(event) {\n      var _event$currentTarget, _event$currentTarget$;\n\n      var input = document.createElement('input');\n      input.type = 'hidden';\n      input.name = name || '';\n      input.value = value || '';\n      (_event$currentTarget = event.currentTarget) == null ? void 0 : (_event$currentTarget$ = _event$currentTarget.closest('form')) == null ? void 0 : _event$currentTarget$.appendChild(input);\n    }\n  }, icon && React.createElement(Icon, {\n    name: icon\n  }), text);\n};\n/**\r\n * A carousel is a nice mobile friendly way of letting a user select something\r\n *\r\n * Super simple scroll based carousel slightly inspired by [react-scroll-snap-slider](https://github.com/lifarl/react-scroll-snap-slider)\r\n */\n\n\nvar Carousel = function Carousel(_ref) {\n  var children = _ref.children,\n      _ref$slideWidth = _ref.slideWidth,\n      slideWidth = _ref$slideWidth === void 0 ? '120px' : _ref$slideWidth,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className;\n  return React.createElement(\"div\", {\n    className: \"mml-carousel \" + className\n  }, React.createElement(\"div\", {\n    className: \"mml-carousel__track\"\n  }, React.createElement(\"div\", {\n    className: \"mml-carousel__slides\"\n  }, Children.map(children, function (child) {\n    return cloneElement(child, {\n      className: 'mml-carousel__slide',\n      slideWidth: slideWidth\n    });\n  }))));\n};\n/**\r\n * A carousel item\r\n */\n\n\nvar CarouselItem = function CarouselItem(_ref) {\n  var children = _ref.children,\n      slideWidth = _ref.slideWidth,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? '' : _ref$width,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className;\n  var finalWidth = width || slideWidth;\n  return React.createElement(\"div\", {\n    className: \"mml-carousel-item \" + className,\n    style: {\n      flex: \"0 0 \" + finalWidth,\n      minWidth: finalWidth\n    }\n  }, children);\n};\n/**\r\n * A grid column\r\n * TODO: Consider renaming this element\r\n */\n\n\nvar Col = function Col(_ref) {\n  var children = _ref.children,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 12 : _ref$width,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? 0 : _ref$offset,\n      _ref$align = _ref.align,\n      align = _ref$align === void 0 ? 'left' : _ref$align;\n  var classNames = \"mml-col-\" + width;\n  if (offset) classNames = classNames + (\" mml-offset-\" + offset);\n  classNames = classNames + (\" mml-align-\" + align);\n  return React.createElement(\"div\", {\n    className: classNames\n  }, children);\n};\n\nvar Error$1 = function Error(_ref) {\n  var _ref$error = _ref.error,\n      error = _ref$error === void 0 ? '' : _ref$error;\n  if (!error) return null;\n  return React.createElement(\"span\", {\n    className: \"mml-error\"\n  }, error);\n};\n\nvar Image = function Image(_ref) {\n  var src = _ref.src,\n      _ref$alt = _ref.alt,\n      alt = _ref$alt === void 0 ? '' : _ref$alt,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? '' : _ref$title,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className;\n  return React.createElement(\"img\", {\n    className: (\"mml-image \" + className).trim(),\n    src: src,\n    alt: alt,\n    title: title\n  });\n};\n/**\r\n * Text input element. Usually you'll want to rely on regular messages\r\n */\n\n\nvar Input = function Input(_ref) {\n  var name = _ref.name,\n      label = _ref.label,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'text' : _ref$type,\n      _ref$placeholder = _ref.placeholder,\n      placeholder = _ref$placeholder === void 0 ? '' : _ref$placeholder;\n\n  var _useState = useState(value),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var id = \"mml-\" + name;\n  return React.createElement(React.Fragment, null, label && React.createElement(\"label\", {\n    className: \"mml-card-header\",\n    htmlFor: id\n  }, React.createElement(\"span\", {\n    className: \"mml-card-header__text\"\n  }, label)), React.createElement(\"input\", {\n    id: id,\n    className: \"mml-input\",\n    name: name,\n    value: state,\n    type: type,\n    placeholder: placeholder,\n    onChange: function onChange(event) {\n      return setState(event.target.value);\n    }\n  }));\n};\n\nvar SIZE = 44;\n\nvar Progress = function Progress(_ref) {\n  var size = _ref.size,\n      _ref$thickness = _ref.thickness,\n      thickness = _ref$thickness === void 0 ? 3.6 : _ref$thickness,\n      color = _ref.color;\n  thickness = typeof thickness === 'string' ? parseFloat(thickness) : thickness; // interpret a digit only string or a number as a pixel value otherwise leave\n  // it as astring, it might be a value like `2em` or `120%`\n\n  size = typeof size === 'string' && /^\\d+$/.test(size) || typeof size === 'number' ? size + 'px' : size;\n  return React.createElement(\"span\", {\n    className: \"mml-progress\",\n    role: \"progressbar\",\n    style: {\n      width: size,\n      height: size,\n      color: color\n    }\n  }, React.createElement(\"svg\", {\n    className: \"mml-progress__svg\",\n    viewBox: SIZE / 2 + \" \" + SIZE / 2 + \" \" + SIZE + \" \" + SIZE\n  }, React.createElement(\"circle\", {\n    className: \"mml-progress__circle\",\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n};\n/**\r\n * Loading indicator\r\n */\n\n\nvar Loading = function Loading(_ref) {\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$loading = _ref.loading,\n      loading = _ref$loading === void 0 ? false : _ref$loading,\n      text = _ref.text,\n      size = _ref.size,\n      thickness = _ref.thickness,\n      color = _ref.color;\n  if (!loading) return null;\n  return React.createElement(\"div\", {\n    className: \"mml-loading \" + className\n  }, React.createElement(Progress, Object.assign({}, {\n    size: size,\n    thickness: thickness,\n    color: color\n  })), text && React.createElement(\"div\", {\n    className: \"mml-loading__text\"\n  }, text));\n};\n\nvar truncate = function truncate(input, length, end) {\n  if (end === void 0) {\n    end = '...';\n  }\n\n  if (input.length > length) return \"\" + input.substring(0, length - end.length) + end;\n  return input;\n};\n\nvar matchMarkdownLinks = function matchMarkdownLinks(message) {\n  var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  var matches = message.match(regexMdLinks);\n  var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n  var links = matches ? matches.map(function (match) {\n    var i = singleMatch.exec(match);\n    return i && i[2];\n  }) : [];\n  return links;\n};\n\nvar MDLinkRender = function MDLinkRender(props) {\n  if (!props.href || !props.href.startsWith('http') && !props.href.startsWith('mailto:')) return props.children;\n  return React.createElement(\"a\", {\n    href: props.href,\n    target: \"_blank\",\n    rel: \"nofollow noreferrer noopener\"\n  }, props.children);\n};\n\nvar markDownRenderers = {\n  link: MDLinkRender\n};\nvar allowedMarkups = ['html', // @ts-ignore\n'root', 'text', 'break', 'paragraph', 'emphasis', 'strong', 'link', 'list', 'listItem', 'code', 'inlineCode', 'blockquote'];\n/**\r\n * MD renders a given text as markdown\r\n */\n\nvar MD = function MD(_ref) {\n  var text = _ref.text;\n  if (!text) return null;\n  var newText = text;\n  var markdownLinks = matchMarkdownLinks(newText); // extract all valid links/emails within text and replace it with proper markup\n\n  find(newText).forEach(function (_ref2) {\n    var type = _ref2.type,\n        href = _ref2.href,\n        value = _ref2.value; // check if message is already  markdown\n\n    var noParsingNeeded = markdownLinks && markdownLinks.filter(function (text) {\n      return (text == null ? void 0 : text.indexOf(href)) !== -1;\n    });\n    if (noParsingNeeded.length > 0) return;\n    var displayLink = type === 'email' ? value : truncate(value.replace(/(http(s?):\\/\\/)?(www\\.)?/, ''), 20);\n    newText = newText.replace(value, \"[\" + displayLink + \"](\" + encodeURI(href) + \")\");\n  });\n  return React.createElement(\"div\", {\n    className: \"mml-md\"\n  }, React.createElement(ReactMarkdown, {\n    allowedTypes: allowedMarkups,\n    renderers: markDownRenderers,\n    source: newText,\n    escapeHtml: true,\n    unwrapDisallowed: true,\n    transformLinkUri: function transformLinkUri(uri) {\n      return uri.startsWith('app://') ? uri : ReactMarkdown.uriTransformer(uri);\n    }\n  }));\n};\n/**\r\n * Mobile friendly number input\r\n */\n\n\nvar Number = function Number(_ref) {\n  var name = _ref.name,\n      value = _ref.value;\n\n  var _useState = useState(parseInt(\"\" + value, 10) || 0),\n      state = _useState[0],\n      setState = _useState[1];\n\n  return React.createElement(\"div\", {\n    className: \"mml-number\"\n  }, React.createElement(\"input\", {\n    name: name,\n    value: state,\n    type: \"hidden\"\n  }), React.createElement(\"span\", {\n    className: \"mml-btn mml-btn--floating mml-btn--icon mml-number__dec\",\n    onClick: function onClick() {\n      return setState(state - 1);\n    }\n  }, React.createElement(Icon, {\n    name: \"remove\"\n  })), React.createElement(\"span\", {\n    className: \"mml-number__count\"\n  }, state), React.createElement(\"span\", {\n    className: \"mml-btn mml-btn--floating mml-btn--icon mml-number__inc\",\n    onClick: function onClick() {\n      return setState(state + 1);\n    }\n  }, React.createElement(Icon, {\n    name: \"add\"\n  })));\n};\n\nvar Row = function Row(_ref) {\n  var children = _ref.children;\n  return React.createElement(\"div\", {\n    className: \"mml-row\"\n  }, children);\n};\n\nvar ITEMS_PER_PAGE = 40;\nvar VERTICAL_COMPENSATION = 3;\nvar INITIAL_INDEX = ITEMS_PER_PAGE;\nvar VIRTUOSO_START_INDEX = 10000;\n/**\r\n * DatePicker select\r\n */\n\nvar DatePickerSelect = function DatePickerSelect(props) {\n  var onChange = props.onChange,\n      icalFilter = props.icalFilter,\n      getItemData = props.getItemData,\n      itemClassName = props.itemClassName,\n      interval = props.interval,\n      format = props.format,\n      value = props.value; // Generate date items\n\n  var generateItems = useCallback(function (quantity, firstIdx) {\n    return Array(quantity).fill(true).map(function (_, idx) {\n      return getItemData({\n        interval: interval,\n        format: format,\n        value: value,\n        idx: firstIdx + idx\n      });\n    }).filter(function (newItem) {\n      return !icalFilter || icalFilter && icalFilter(newItem.value);\n    });\n  }, [interval, format, value, icalFilter, getItemData]);\n\n  var _useState = useState(generateItems(ITEMS_PER_PAGE * 2, -ITEMS_PER_PAGE)),\n      items = _useState[0],\n      setItems = _useState[1];\n\n  var _useState2 = useState(VIRTUOSO_START_INDEX),\n      firstItemIndex = _useState2[0],\n      setFirstItemIndex = _useState2[1];\n\n  var initialIndexOffset = useRef(INITIAL_INDEX);\n\n  var _useState3 = useState(null),\n      selectedIdx = _useState3[0],\n      setSelectedIdx = _useState3[1];\n\n  var handleClick = useCallback(function (item) {\n    onChange(item.value);\n    var firstItemIndex = initialIndexOffset.current || 0;\n    var nextFirstItemIdx = firstItemIndex - INITIAL_INDEX - ITEMS_PER_PAGE;\n    var missingTopItems = nextFirstItemIdx - item.idx + VERTICAL_COMPENSATION; // prepend date items, when the selected date's index is too low we prepend\n    // some date options so that it will remain vertically centered in the middle\n\n    if (missingTopItems >= 0) {\n      nextFirstItemIdx -= missingTopItems;\n      initialIndexOffset.current -= firstItemIndex - missingTopItems;\n      setItems(function (items) {\n        return [].concat(generateItems(missingTopItems, nextFirstItemIdx), items);\n      });\n    }\n\n    setSelectedIdx(item.idx);\n  }, [setItems, generateItems, initialIndexOffset, onChange]);\n  var appendItems = useCallback(function (lastItemIndex) {\n    setItems(function (items) {\n      return [].concat(items, generateItems(ITEMS_PER_PAGE, lastItemIndex));\n    });\n  }, [setItems, generateItems]); // @see https://git.io/JIUuo\n\n  var prependItems = useCallback(function () {\n    var firstItemIndex = initialIndexOffset.current || 0;\n    var nextFirstItemIdx = firstItemIndex - INITIAL_INDEX - ITEMS_PER_PAGE;\n\n    if (initialIndexOffset) {\n      initialIndexOffset.current -= ITEMS_PER_PAGE;\n    }\n\n    setItems(function (items) {\n      return [].concat(generateItems(ITEMS_PER_PAGE, nextFirstItemIdx), items);\n    });\n    setFirstItemIndex(firstItemIndex - ITEMS_PER_PAGE);\n    return false;\n  }, [setItems, generateItems, initialIndexOffset]); // on mount check if there is a selected value and save its idx in state\n\n  useEffect(function () {\n    if (value) {\n      var initialSelectedIdx = null;\n\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].isSelected(value)) {\n          initialSelectedIdx = items[i].idx;\n          break;\n        }\n      }\n\n      setSelectedIdx(initialSelectedIdx);\n    }\n  }, []); // eslint-disable-line\n\n  return React.createElement(Virtuoso, {\n    data: items,\n    firstItemIndex: firstItemIndex,\n    itemContent: function itemContent(_, item) {\n      return React.createElement(\"div\", {\n        className: itemClassName + (\" mml-datepicker__item \" + (item.idx === selectedIdx ? 'mml-datepicker__item--selected' : '')),\n        onClick: function onClick() {\n          return handleClick(item);\n        }\n      }, item.displayValue);\n    },\n    endReached: appendItems,\n    startReached: prependItems\n  });\n};\n/**\r\n * Get item data\r\n */\n\n\nvar getItemData = function getItemData(props) {\n  var idx = props.idx,\n      interval = props.interval,\n      value = props.value,\n      format = props.format;\n  var newValue = idx >= 0 ? dayjs(value).add(idx * (interval * 24), 'hour') : dayjs(value).subtract(idx * (interval * 24) * -1, 'hour');\n  return {\n    idx: idx,\n    value: newValue,\n    displayValue: dayjs(newValue).format(format),\n    isSelected: function isSelected(currentValue) {\n      return dayjs(newValue).isSame(interval === 1 ? dayjs(currentValue) : dayjs(currentValue).add(interval, 'day'), 'date');\n    }\n  };\n};\n/**\r\n * DatePicker date\r\n */\n\n\nvar DatePickerDate = function DatePickerDate(props) {\n  return React.createElement(\"div\", {\n    className: \"mml-datepicker__select mml-datepicker__date\"\n  }, React.createElement(DatePickerSelect, Object.assign({}, props, {\n    itemClassName: \"mml-datepicker__item--day\",\n    getItemData: getItemData\n  })));\n};\n\ndayjs.extend(isBetween);\n/**\r\n * Get item data\r\n */\n\nvar getItemData$1 = function getItemData(props) {\n  var idx = props.idx,\n      interval = props.interval,\n      value = props.value,\n      format = props.format;\n  var newValue = idx >= 0 ? dayjs(value).add(idx * interval, 'minute') : dayjs(value).subtract(idx * -1 * interval, 'minute');\n  return {\n    idx: idx,\n    value: newValue,\n    displayValue: dayjs(newValue).format(format),\n    isSelected: function isSelected(currentValue) {\n      return dayjs(newValue).isBetween(currentValue, dayjs(currentValue).add(interval - 1, 'minute'), 'minute', '[]');\n    }\n  };\n};\n/**\r\n * DatePicker time\r\n */\n\n\nvar DatePickerTime = function DatePickerTime(props) {\n  return React.createElement(\"div\", {\n    className: \"mml-datepicker__select mml-datepicker__time\"\n  }, React.createElement(DatePickerSelect, Object.assign({}, props, {\n    itemClassName: \"mml-datepicker__item--time\",\n    getItemData: getItemData$1\n  })));\n};\n\nvar DatePicker = function DatePicker(_ref) {\n  var name = _ref.name,\n      selected = _ref.selected,\n      dateInterval = _ref.dateInterval,\n      timeInterval = _ref.timeInterval,\n      dateFormat = _ref.dateFormat,\n      timeFormat = _ref.timeFormat,\n      fullDay = _ref.fullDay,\n      icalFilter = _ref.icalFilter;\n\n  var _useState = useState(selected),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  var handleChangeDate = function handleChangeDate(value) {\n    setDate(function (prevDate) {\n      return prevDate.set('date', value.get('date')).set('month', value.get('month')).set('year', value.get('year'));\n    });\n  };\n\n  var handleChangeTime = function handleChangeTime(value) {\n    setDate(function (prevDate) {\n      return prevDate.set('minute', value.get('minute')).set('hour', value.get('hour'));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"mml-datepicker mml-datepicker--\" + (fullDay ? 'single' : 'double')\n  }, React.createElement(\"input\", {\n    name: name,\n    value: date.toISOString(),\n    type: \"hidden\"\n  }), React.createElement(DatePickerDate, {\n    icalFilter: icalFilter,\n    format: dateFormat,\n    value: date,\n    onChange: handleChangeDate,\n    interval: dateInterval\n  }), !fullDay && React.createElement(DatePickerTime, {\n    icalFilter: icalFilter,\n    format: timeFormat,\n    value: date,\n    onChange: handleChangeTime,\n    interval: timeInterval\n  }));\n};\n\nvar setupIcalFilter = /*#__PURE__*/function () {\n  var _ref = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/runtime_1.mark(function _callee(icalURL, duration) {\n    var response, body, icalExpander;\n    return runtime_1.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(icalURL, {\n              method: 'GET',\n              redirect: 'follow',\n              credentials: 'same-origin'\n            });\n\n          case 2:\n            response = _context.sent;\n            _context.next = 5;\n            return response.text();\n\n          case 5:\n            body = _context.sent;\n\n            if (response.ok) {\n              _context.next = 8;\n              break;\n            }\n\n            throw new Error(body);\n\n          case 8:\n            icalExpander = new IcalExpander({\n              ics: body,\n              maxIterations: 10\n            });\n            return _context.abrupt(\"return\", function () {\n              return function (start) {\n                if (!start) return true;\n\n                var _icalExpander$between = icalExpander.between(start.toDate(), start.add(duration, 'minute').toDate()),\n                    events = _icalExpander$between.events;\n\n                return !events.length;\n              };\n            });\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function setupIcalFilter(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar Scheduler = function Scheduler(_ref2) {\n  var name = _ref2.name,\n      selected = _ref2.selected,\n      icalAvailability = _ref2.icalAvailability,\n      _ref2$duration = _ref2.duration,\n      duration = _ref2$duration === void 0 ? 30 : _ref2$duration,\n      _ref2$dateInterval = _ref2.dateInterval,\n      dateInterval = _ref2$dateInterval === void 0 ? 1 : _ref2$dateInterval,\n      _ref2$timeInterval = _ref2.timeInterval,\n      timeInterval = _ref2$timeInterval === void 0 ? 30 : _ref2$timeInterval,\n      _ref2$dateFormat = _ref2.dateFormat,\n      dateFormat = _ref2$dateFormat === void 0 ? 'ddd MMM DD' : _ref2$dateFormat,\n      _ref2$timeFormat = _ref2.timeFormat,\n      timeFormat = _ref2$timeFormat === void 0 ? 'hh:mm A' : _ref2$timeFormat,\n      _ref2$fullDay = _ref2.fullDay,\n      fullDay = _ref2$fullDay === void 0 ? false : _ref2$fullDay;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(function () {\n    return function () {\n      return true;\n    };\n  }),\n      icalFilter = _useState3[0],\n      setIcalFilter = _useState3[1];\n\n  useEffect(function () {\n    if (!icalAvailability) return;\n    setLoading(true);\n    setupIcalFilter(icalAvailability, duration).then(setIcalFilter)[\"catch\"](function (err) {\n      console.warn('loading ical failed', {\n        icalAvailability: icalAvailability,\n        err: err\n      });\n      setError('iCal availability could not be loaded');\n    })[\"finally\"](function () {\n      return setLoading(false);\n    });\n  }, [icalAvailability, duration]);\n  return React.createElement(Card, {\n    className: \"mml-scheduler\"\n  }, React.createElement(CardHeader, {\n    icon: \"date_range\",\n    text: \"Scheduler\"\n  }), React.createElement(CardBody, null, error && !loading && React.createElement(Error$1, {\n    error: \"Failed, error: \" + error\n  }), !error && loading && React.createElement(Loading, {\n    loading: true,\n    text: \"Loading availability\"\n  }), !error && !loading && React.createElement(DatePicker, {\n    name: name,\n    selected: selected ? dayjs(selected) : dayjs().startOf('hour'),\n    dateInterval: dateInterval,\n    timeInterval: timeInterval,\n    dateFormat: dateFormat,\n    timeFormat: timeFormat,\n    fullDay: fullDay,\n    icalFilter: icalFilter\n  })));\n};\n\nvar Success = function Success(_ref) {\n  var success = _ref.success;\n  if (success) return React.createElement(\"div\", {\n    className: \"mml-success\"\n  }, success);\n  return null;\n};\n/**\r\n * Simple paragraph text element\r\n */\n\n\nvar Text = function Text(_ref) {\n  var text = _ref.text,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className;\n  return React.createElement(\"div\", {\n    className: (\"mml-text \" + className).trim()\n  }, text);\n};\n/**\r\n * The converters maps MML tags to react nodes\r\n * Every converter is passed the MML tag as well as the children (as React nodes)\r\n */\n\n\nvar converters = {\n  button: function button(tag) {\n    return React.createElement(Button, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      text: tag.getText(),\n      name: tag.attributes.name,\n      value: tag.attributes.value\n    }));\n  },\n  button_list: function button_list(tag, children) {\n    return React.createElement(ButtonList, Object.assign({}, tag.attributes, {\n      key: tag.key\n    }), children);\n  },\n  input: function input(tag) {\n    return React.createElement(Input, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      name: tag.attributes.name,\n      value: tag.attributes.value\n    }));\n  },\n  add_to_calendar: function add_to_calendar(tag) {\n    return React.createElement(AddToCalendar, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      title: tag.attributes.title,\n      start: tag.attributes.start,\n      end: tag.attributes.end\n    }));\n  },\n  col: function col(tag, children) {\n    return React.createElement(Col, Object.assign({}, tag.attributes, {\n      key: tag.key\n    }), children);\n  },\n  row: function row(tag, children) {\n    return React.createElement(Row, Object.assign({}, tag.attributes, {\n      key: tag.key\n    }), children);\n  },\n  icon: function icon(tag) {\n    return React.createElement(Icon, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      name: tag.attributes.name\n    }));\n  },\n  image: function image(tag) {\n    return React.createElement(Image, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      src: tag.attributes.src\n    }));\n  },\n  md: function md(tag) {\n    return React.createElement(MD, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      text: tag.getText()\n    }));\n  },\n  text: function text(tag) {\n    return React.createElement(Text, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      text: tag.getText()\n    }));\n  },\n  scheduler: function scheduler(tag) {\n    return React.createElement(Scheduler, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      name: tag.attributes.name,\n      dateInterval: parseInt(tag.attributes.dateInterval, 10) || 1,\n      timeInterval: parseInt(tag.attributes.timeInterval, 10) || 30,\n      duration: parseInt(tag.attributes.duration, 10) || 30,\n      selected: tag.attributes.selected,\n      fullDay: tag.attributes.fullDay === 'true',\n      icalAvailability: tag.attributes.icalAvailability\n    }));\n  },\n  carousel: function carousel(tag, children) {\n    return React.createElement(Carousel, Object.assign({\n      slideWidth: tag.attributes.slideWidth\n    }, tag.attributes, {\n      key: tag.key\n    }), children);\n  },\n  item: function item(tag, children) {\n    return React.createElement(CarouselItem, Object.assign({}, tag.attributes, {\n      key: tag.key\n    }), children);\n  },\n  number: function number(tag) {\n    return React.createElement(Number, Object.assign({}, tag.attributes, {\n      key: tag.key,\n      name: tag.attributes.name,\n      value: tag.attributes.value\n    }));\n  }\n};\n/**\r\n * Tree - The tree object for MML tags\r\n */\n\nvar Tree = /*#__PURE__*/function () {\n  function Tree(node, children, customConvertors) {\n    this.converters = _extends({}, converters, customConvertors);\n    this.node = node;\n    this.children = children;\n    this.reactElements = this.toReact();\n    this.name = node.attributes.name;\n    this.type = node.attributes.type;\n  }\n  /**\r\n   * convert all nodes to react and maintain the hierarchy\r\n   */\n\n\n  var _proto = Tree.prototype;\n\n  _proto.toReact = function toReact(parent) {\n    var _this = this;\n\n    if (parent === void 0) {\n      parent = this;\n    }\n\n    var reactNodes = [];\n    (parent.children || []).forEach(function (child, i) {\n      var converter = _this.converters[child.name];\n\n      if (!converter || !Object.hasOwnProperty.call(_this.converters, child.name)) {\n        throw Error(\"Converter not found for tag \" + child.name + \", Available converters are \" + Object.keys(_this.converters));\n      }\n\n      var children = _this.toReact(child);\n\n      child.key = \"tag-\" + child.name + \"-position-\" + i;\n      reactNodes.push(converter(child, children));\n    });\n    return reactNodes;\n  };\n\n  return Tree;\n}();\n/**\r\n * SourceToXML - Takes an MML string and converts it to XML nodes\r\n *\r\n * @param {string} source MML tag string\r\n *\r\n * @returns {array} an Array of XML nodes\r\n */\n\n\nfunction SourceToXML(source) {\n  var src = source.trim(); // the wrapping MML tags are optional, for parsing simplicity we automatically add them if they are not already there\n\n  if (!src.startsWith('<mml')) src = \"<mml>\" + source + \"</mml>\"; // emulate HTML handling of & escaping\n\n  var unescapedAmps = /&(?!amp;|lt;|gt;)/g;\n  src = src.replace(unescapedAmps, '&amp;'); // convert the string to XML nodes\n  // this library is relatively lightweight and doesn't do a ton of validation\n\n  return parseXml(src);\n}\n\nfunction convertNodes(nodes) {\n  return nodes.reduce(function (acc, node) {\n    var element = node;\n    var children;\n    if (element.children) children = convertNodes(element.children);\n    var name = element.name;\n\n    if (node.type === 'text') {\n      if (node.text.trim().length) name = 'text';else return acc; // skip empty text elements\n    }\n\n    acc.push(new MMLTag(name, node, children));\n    return acc;\n  }, []);\n}\n/**\r\n * XMLtoMMLTree - Takes an array of XML nodes and converts it into an MML Tree\r\n *\r\n * @param {type} XMLNodes an array of XML nodes\r\n *\r\n * @returns {MMLTree} The MML tree\r\n */\n\n\nfunction XMLtoMMLTree(document, customConvertors) {\n  if (!document || !document.children || !document.children.length) throw new Error('bad input');\n  var mmlNode = document.children[0];\n  if (mmlNode.name !== 'mml') throw new Error('missing mml tag');\n  return new Tree(mmlNode, convertNodes(mmlNode.children), customConvertors);\n}\n/**\r\n * Takes an MML string and returns an MML Tree\r\n *\r\n * @param {string} source MML tag string\r\n *\r\n *  @returns {Tree} An MML Tree\r\n */\n\n\nfunction Parse(source, customConvertors) {\n  var XMLNodes = SourceToXML(source);\n  return XMLtoMMLTree(XMLNodes, customConvertors);\n}\n/**\r\n * MML root component\r\n */\n\n\nvar MML = function MML(_ref) {\n  var source = _ref.source,\n      onSubmit = _ref.onSubmit,\n      converters = _ref.converters,\n      _ref$theme = _ref.theme,\n      theme = _ref$theme === void 0 ? '' : _ref$theme,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$Loading = _ref.Loading,\n      Loading$1 = _ref$Loading === void 0 ? Loading : _ref$Loading,\n      _ref$Error = _ref.Error,\n      Error = _ref$Error === void 0 ? Error$1 : _ref$Error,\n      _ref$Success = _ref.Success,\n      Success$1 = _ref$Success === void 0 ? Success : _ref$Success;\n\n  var _useState = useState(''),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState({\n    loading: false,\n    error: '',\n    success: ''\n  }),\n      submitState = _useState2[0],\n      setSubmitState = _useState2[1];\n\n  var tree = useMemo(function () {\n    try {\n      return Parse(source, converters);\n    } catch (e) {\n      console.warn('mml parsing error: ', source, e);\n      setError(\"This chat message has invalid formatting and can't be shown\");\n      return null;\n    }\n  }, [source, converters]);\n  var handleSubmit = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/runtime_1.mark(function _callee(event) {\n      var state;\n      return runtime_1.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              state = {};\n              if (tree != null && tree.name) state.mml_name = tree.name; // include mml_name in the data\n\n              new FormData(event.currentTarget).forEach(function (value, key) {\n                state[key] = value;\n              });\n\n              if (onSubmit) {\n                _context.next = 6;\n                break;\n              }\n\n              return _context.abrupt(\"return\", console.warn('Forgot to pass onSubmit prop to <MML/>? payload:', state));\n\n            case 6:\n              _context.prev = 6;\n              setSubmitState({\n                loading: true,\n                error: '',\n                success: ''\n              });\n              _context.next = 10;\n              return onSubmit(state);\n\n            case 10:\n              setSubmitState({\n                loading: false,\n                error: '',\n                success: 'submitted'\n              });\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](6);\n              setSubmitState({\n                loading: false,\n                error: 'Failed to send the request. Please try again.',\n                success: ''\n              });\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[6, 13]]);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [onSubmit, tree]);\n  return React.createElement(\"div\", {\n    className: \"mml-container \" + theme + \" \" + className,\n    \"data-testid\": \"mml-container\"\n  }, error ? React.createElement(\"div\", {\n    className: \"mml-wrap\"\n  }, Error && React.createElement(Error, {\n    error: error\n  })) : React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"mml-wrap\",\n    \"data-testid\": \"mml-form\"\n  }, tree != null && tree.type ? React.createElement(\"div\", {\n    className: \"mml-card\"\n  }, tree == null ? void 0 : tree.reactElements) : tree == null ? void 0 : tree.reactElements, submitState.loading && Loading$1 && React.createElement(Loading$1, {\n    loading: submitState.loading\n  }), submitState.success && Success$1 && React.createElement(Success$1, {\n    success: submitState.success\n  }), submitState.error && Error && React.createElement(Error, {\n    error: submitState.error\n  })));\n};\n\nexport { AddToCalendar, Button, ButtonList, Card, CardBody, CardHeader, Carousel, CarouselItem, Col, Error$1 as Error, Icon, Image, Input, Loading, MD, MML, MMLTag, Number, Parse, Row, Scheduler, SourceToXML, Success, Text, Tree, XMLtoMMLTree, converters, truncate };","map":{"version":3,"sources":["../node_modules/regenerator-runtime/runtime.js","../src/parser/MMLTag.ts","../src/components/Card.tsx","../src/components/Icon.tsx","../src/components/CardHeader.tsx","../src/components/CardBody.tsx","../src/components/ButtonList.tsx","../src/components/AddToCalendar.tsx","../src/components/Button.tsx","../src/components/Carousel.tsx","../src/components/CarouselItem.tsx","../src/components/Col.tsx","../src/components/Error.tsx","../src/components/Image.tsx","../src/components/Input.tsx","../src/components/Progress.tsx","../src/components/Loading.tsx","../src/components/MD.tsx","../src/components/Number.tsx","../src/components/Row.tsx","../src/components/DatePicker/DatePickerSelect.tsx","../src/components/DatePicker/DatePickerDate.tsx","../src/components/DatePicker/DatePickerTime.tsx","../src/components/DatePicker/DatePicker.tsx","../src/components/Scheduler.tsx","../src/components/Success.tsx","../src/components/Text.tsx","../src/parser/converters.tsx","../src/parser/tree.ts","../src/parser/parser.ts","../src/mml/MML.tsx"],"names":["undefined","node","MMLTag","getText","isXmlElement","initialState","name","value","attributes","Card","className","children","Icon","CardHeader","text","icon","CardBody","ButtonList","variant","SvgIcon","path","xmlns","viewBox","d","IconGoogle","IconMicrosoft","IconApple","ua","navigator","mobileRE","isIE","window","getCurrentURL","CALENDAR_SERVICES","id","label","dayjs","params","acc","encodeURIComponent","start","end","title","location","description","event","startFormatted","formatTime","endFormatted","createQueryString","details","startdt","enddt","subject","body","allday","url","isMobile","encodeURI","AddToCalendar","filename","blob","type","link","document","key","onClick","handleLinkClick","href","buildUrl","target","rel","Button","sanitizeUrl","input","Carousel","slideWidth","cloneElement","CarouselItem","width","finalWidth","style","flex","minWidth","Col","offset","align","classNames","Error","error","Image","src","alt","Input","placeholder","state","setState","useState","htmlFor","onChange","SIZE","Progress","size","thickness","color","parseFloat","role","height","cx","cy","r","fill","strokeWidth","Loading","loading","truncate","length","matchMarkdownLinks","regexMdLinks","matches","message","singleMatch","links","i","MDLinkRender","props","markDownRenderers","allowedMarkups","MD","newText","markdownLinks","linkify","noParsingNeeded","displayLink","allowedTypes","renderers","source","escapeHtml","unwrapDisallowed","transformLinkUri","uri","ReactMarkdown","Number","parseInt","Row","ITEMS_PER_PAGE","VERTICAL_COMPENSATION","INITIAL_INDEX","VIRTUOSO_START_INDEX","DatePickerSelect","icalFilter","getItemData","itemClassName","interval","format","generateItems","useCallback","idx","firstIdx","newItem","items","setItems","firstItemIndex","setFirstItemIndex","initialIndexOffset","useRef","selectedIdx","setSelectedIdx","handleClick","item","nextFirstItemIdx","missingTopItems","appendItems","prependItems","useEffect","initialSelectedIdx","data","itemContent","endReached","startReached","newValue","displayValue","isSelected","DatePickerDate","DatePickerTime","DatePicker","selected","dateInterval","timeInterval","dateFormat","timeFormat","fullDay","date","setDate","handleChangeDate","prevDate","handleChangeTime","setupIcalFilter","response","fetch","method","redirect","credentials","icalExpander","ics","maxIterations","events","Scheduler","icalAvailability","duration","setLoading","setError","setIcalFilter","console","err","Success","success","Text","converters","button","tag","button_list","add_to_calendar","col","row","image","md","scheduler","carousel","number","Tree","toReact","parent","reactNodes","converter","child","Object","SourceToXML","unescapedAmps","parseXml","element","convertNodes","XMLtoMMLTree","customConvertors","mmlNode","Parse","XMLNodes","MML","onSubmit","theme","LoadingComponent","ErrorComponent","SuccessComponent","submitState","setSubmitState","tree","useMemo","handleSubmit"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { XmlElement, XmlText } from '@rgrove/parse-xml';\n\nfunction isXmlElement(node: XmlElement | XmlText): node is XmlElement {\n  return !!(node as XmlElement).children;\n}\n\n/**\n * MMLTag - Xml tag converted to this MMLTag\n */\nexport class MMLTag {\n  name: string;\n  node: XmlElement | XmlText;\n  attributes: Record<string, string>;\n  children?: MMLTag[];\n  key?: string;\n\n  constructor(name: string, node: XmlElement | XmlText, children?: MMLTag[]) {\n    this.name = name;\n    this.node = node;\n    this.attributes = (this.node as XmlElement).attributes || {};\n    this.children = children;\n  }\n\n  getText() {\n    if (this.node.type === 'text') return this.node.text;\n    else if (isXmlElement(this.node) && this.node.children.length) return (this.node.children[0] as XmlText).text;\n    return '';\n  }\n\n  initialState() {\n    const { name, value } = this.attributes;\n    if (name) return { [name]: value };\n    return {};\n  }\n}\n","import React, { FC, ReactNode } from 'react';\n\nexport type CardProps = {\n  children?: ReactNode;\n  /** Additional card class name */\n  className?: string;\n};\n\nexport const Card: FC<CardProps> = ({ className = '', children }) => {\n  return <div className={`mml-card ${className}`}>{children}</div>;\n};\n","import React, { FC } from 'react';\n\nexport type IconProps = {\n  /** The name of the material icon, see https://material.io/resources/icons/ */\n  name: string;\n};\n\nexport const Icon: FC<IconProps> = ({ name }) => {\n  return <i className=\"mml-icon material-icons\">{name}</i>;\n};\n","import React, { FC } from 'react';\n\nimport { Icon } from './Icon';\n\nexport type CardHeaderProps = {\n  /** Header text */\n  text: string;\n  /** The name of the material icon, see https://material.io/resources/icons/ */\n  icon?: string;\n  /** Additional card class name */\n  className?: string;\n};\n\nexport const CardHeader: FC<CardHeaderProps> = ({ text, icon = '', className = '' }) => {\n  return (\n    <div className={`mml-card-header ${className}`}>\n      {icon && <Icon name={icon} />}\n      <span className=\"mml-card-header__text\">{text}</span>\n    </div>\n  );\n};\n","import React, { FC, ReactNode } from 'react';\n\nexport type CardBodyProps = {\n  children?: ReactNode;\n  /** Additional card class name */\n  className?: string;\n};\n\nexport const CardBody: FC<CardBodyProps> = ({ className = '', children }) => {\n  return <div className={`mml-card-body ${className}`}>{children}</div>;\n};\n","import React, { FC, ReactElement } from 'react';\nimport { ButtonProps } from './Button';\n\nexport type ButtonListProps = {\n  /** A list of buttons */\n  children?: ReactElement<ButtonProps>[] | ReactElement<ButtonProps>;\n  /** Button style variant */\n  variant?: 'floating';\n};\n\n/**\n * A list of buttons\n */\nexport const ButtonList: FC<ButtonListProps> = ({ children, variant = '' }) => {\n  return (\n    <div className={`mml-btnlist ${variant === 'floating' ? ' mml-btnlist--floating' : 'mml-btnlist--grounded'}`}>\n      {children}\n    </div>\n  );\n};\n","import React, { FC, ReactElement, SyntheticEvent } from 'react';\nimport dayjs from 'dayjs';\n\nimport { Card } from './Card';\nimport { CardHeader } from './CardHeader';\nimport { CardBody } from './CardBody';\nimport { ButtonList } from './ButtonList';\n\ntype SvgIconProps = {\n  /** The SVG path, calibrated for a 24 sized viewBox (as in Material Icons) */\n  path: string;\n};\n\n/**\n * Utility to have custom svg icons outside the `material-icons` system provided by the Icon component\n * Use case internal to this library is the AddToCalendar component which needs brand icons which are not\n * included in [the default material-icons set and probably never will be](https://git.io/Jk9yH)\n */\nconst SvgIcon: FC<SvgIconProps> = ({ path }) => (\n  <i className=\"mml-icon\">\n    <svg className=\"mml-icon__svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n      <path d={path} />\n    </svg>\n  </i>\n);\n\n/** Icon path from https://materialdesignicons.com/ */\nconst IconGoogle = (\n  <SvgIcon path=\"M21.35 11.1h-9.17v2.73h6.5c-.33 3.8-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27 3.1 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10 5.35 0 9.25-3.67 9.25-9.1 0-1.15-.15-1.8-.15-1.8h0z\" />\n);\n\n/** Icon path from https://materialdesignicons.com/ */\nconst IconMicrosoft = (\n  <SvgIcon path=\"M3 12V6.75l6-1.32v6.48L3 12m17-9v8.75l-10 .15V5.2L20 3M3 13l6 .1v6.8l-6-1.15V13m17 .25V22l-10-1.9v-7l10 .15z\" />\n);\n\n/** Icon path from https://materialdesignicons.com/ */\nconst IconApple = (\n  <SvgIcon path=\"M18.7 19.5c-.83 1.24-1.7 2.45-3.05 2.47-1.34.03-1.77-.8-3.3-.8-1.53 0-2 .77-3.27.82-1.3.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.4c.87-1.52 2.43-2.48 4.12-2.5 1.28-.02 2.5.87 3.3.87.78 0 2.26-1.07 3.8-.9.65.03 2.47.26 3.64 1.98-.1.06-2.17 1.28-2.15 3.8.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.2-.7.85-1.83 1.5-2.95 1.42-.15-1.15.4-2.35 1.05-3.1z\" />\n);\n\nfunction isMobile() {\n  const ua = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n  if (!ua) return false;\n  const mobileRE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;\n  if (mobileRE.test(ua)) return true;\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  )\n    return true;\n  return false;\n}\n\n// @ts-ignore (expect-error breaks in GH actions) TODO: replace deprecated method\nconst isIE = (typeof window !== 'undefined' && window.navigator.msSaveOrOpenBlob && window.Blob) as boolean;\n\nconst getCurrentURL = () => {\n  if (typeof window !== 'undefined') return window.location.href;\n  return '';\n};\n\nexport type AddToCalendarEvent = {\n  /**\n   * The title for the calendar entry, if a string it must be parseable as `Date`\n   */\n  start: string | Date;\n  /**\n   * The start time for the calendar entry, if a string it must be parseable as `Date`\n   */\n  end: string | Date;\n  /**\n   * The end time for the calendar entry\n   */\n  title: string;\n  /**\n   * The optional location for the calendar entry\n   */\n  location?: string;\n  /**\n   * The optional description for the calendar entry\n   */\n  description?: string;\n};\n\nexport type AddToCalendarProps = AddToCalendarEvent & {\n  /**\n   * Additional element class name\n   * @default ''\n   */\n  className?: string;\n};\n\n// we infer this from the the const CALENDAR_SERVICES, we might keep this\n// here if we want to make the calendar services configurable\n// type AddToCalendarService = {\n//   id: string;\n//   label: string;\n//   Icon?: FC;\n// };\ntype CalendarID = 'google' | 'apple' | 'outlook' | 'outlookcom';\n\nconst CALENDAR_SERVICES: Array<{ id: CalendarID; label: string; Icon: ReactElement }> = [\n  { id: 'google', label: 'Google', Icon: IconGoogle },\n  { id: 'apple', label: 'Apple Calendar', Icon: IconApple },\n  { id: 'outlook', label: 'Outlook', Icon: IconMicrosoft },\n  { id: 'outlookcom', label: 'Outlook.com', Icon: IconMicrosoft },\n];\n\n/**\n * Format time\n *\n * Adapted from the `moment` way of [react-add-to-calendar](https://git.io/JkWol)\n * to the dayjs way\n */\nfunction formatTime(date: string | Date, id: CalendarID) {\n  return dayjs(date).format(id === 'outlookcom' ? 'YYYY-MM-DDTHH:mm:ss' : 'YYYYMMDDTHHmmss') + 'Z';\n}\n\n/**\n * Create query string with given parameters\n *\n * It checks that the parameter value is not falsy\n */\nfunction createQueryString(params: Record<string, string | undefined> = {}) {\n  return Object.keys(params).reduce((acc, key) => {\n    const value = params[key];\n    if (value) acc += `&${key}=${encodeURIComponent(value)}`;\n    return acc;\n  }, '');\n}\n\n/**\n * Build calendar URL\n *\n * Resources:\n * - [SO question about Google](https://stackoverflow.com/q/22757908)\n * - [docs about outlook.com format](https://git.io/JkWp5)\n * - [addevent wrapper SaaS](https://www.addevent.com/)\n */\nfunction buildUrl(event: AddToCalendarEvent, id: CalendarID) {\n  const { start, end, title, location, description } = event;\n  const startFormatted = formatTime(start, id);\n  const endFormatted = formatTime(end, id);\n\n  if (id === 'google')\n    return `https://calendar.google.com/calendar/render?action=TEMPLATE&dates=${startFormatted}/${endFormatted}${createQueryString(\n      { location, text: title, details: description },\n    )}`;\n\n  if (id === 'outlookcom')\n    return `https://outlook.live.com/owa/?rru=addevent${createQueryString({\n      startdt: startFormatted,\n      enddt: endFormatted,\n      subject: title,\n      location,\n      body: description,\n      allday: 'false', // TODO: calculate it?\n    })}&path=/calendar/view/Month`;\n\n  let url = [\n    'BEGIN:VCALENDAR',\n    'VERSION:2.0',\n    'BEGIN:VEVENT',\n    'URL:' + getCurrentURL(),\n    'DTSTART:' + startFormatted,\n    'DTEND:' + endFormatted,\n    'SUMMARY:' + title,\n    'DESCRIPTION:' + description,\n    'LOCATION:' + location,\n    'END:VEVENT',\n    'END:VCALENDAR',\n  ].join('\\n');\n\n  if (!isIE && isMobile()) url = encodeURI('data:text/calendar;charset=utf8,' + url);\n\n  return url;\n}\n\n/**\n * AddToCalendar widget that supports google, apple and outlook calendars\n */\nexport const AddToCalendar: FC<AddToCalendarProps> = ({\n  title,\n  start,\n  end,\n  className = '',\n  location = '',\n  description = '',\n}) => {\n  const event = { start: start, end: end, title, location, description };\n\n  function handleLinkClick(event: SyntheticEvent<HTMLAnchorElement>) {\n    event.preventDefault();\n    const url = event.currentTarget.getAttribute('href') as string;\n\n    if (!isMobile() && (url.startsWith('data') || url.startsWith('BEGIN'))) {\n      const filename = 'download.ics';\n      const blob = new Blob([url], { type: 'text/calendar;charset=utf-8' });\n\n      if (isIE) {\n        // @ts-ignore (expect-error breaks in GH actions) TODO: replace deprecated method\n        window.navigator.msSaveOrOpenBlob(blob, filename);\n      } else {\n        // many browsers do not properly support downloading data URIs\n        // (even with \"download\" attribute in use) so this solution\n        // ensures the event will download cross-browser\n        const link = document.createElement('a');\n        link.href = window.URL.createObjectURL(blob);\n        link.setAttribute('download', filename);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      }\n    } else {\n      window.open(url, '_blank');\n    }\n  }\n\n  return (\n    <Card className={`mml-add-to-calendar ${className}`}>\n      <CardHeader icon=\"date_range\" text=\"Add to My Calendar\" />\n      <CardBody>\n        <ButtonList>\n          {CALENDAR_SERVICES.map(({ id, label, Icon }) => (\n            <a\n              key={id}\n              className={`mml-btn ${Icon ? 'mml-btn--with-icon' : ''}`}\n              onClick={handleLinkClick}\n              href={buildUrl(event, id)}\n              target=\"_blank\"\n              rel=\"nofollow noreferrer noopener\"\n            >\n              {Icon} {label}\n            </a>\n          ))}\n        </ButtonList>\n      </CardBody>\n    </Card>\n  );\n};\n","import React, { FC, SyntheticEvent } from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\nimport { Icon } from './Icon';\n\nexport type ButtonProps = {\n  /** Additional button class name */\n  className?: string;\n  /** The text to display in the button */\n  text: string;\n  /** The name of the button */\n  name?: string;\n  /** The value of the button */\n  value?: string;\n  /** If the button should open a link use this prop */\n  url?: string;\n  /** Button style variant */\n  variant?: 'floating';\n  /** Optional button icon name to display besides the text (from [material icons](https://material.io/resources/icons/)) */\n  icon?: string;\n};\n\n/**\n * Button can be used to open a URL, submit the form or trigger a select when clicked\n */\nexport const Button: FC<ButtonProps> = ({ className = '', text, name, value, url = '', variant, icon }) => {\n  if (icon) {\n    className += text ? ' mml-btn--with-icon' : ' mml-btn--icon';\n  } else {\n    className += ' mml-btn--text';\n  }\n  className += variant === 'floating' ? ' mml-btn--floating' : ' mml-btn--grounded';\n\n  if (url)\n    return (\n      <a className={`mml-btn ${className}`} href={sanitizeUrl(url)} target=\"_blank\" rel=\"nofollow noreferrer noopener\">\n        {icon && <Icon name={icon} />}\n        {text}\n      </a>\n    );\n\n  return (\n    <button\n      className={`mml-btn ${className}`}\n      type=\"submit\"\n      name={name}\n      value={value}\n      onClick={(event: SyntheticEvent) => {\n        const input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = name || '';\n        input.value = value || '';\n        event.currentTarget?.closest('form')?.appendChild(input);\n      }}\n    >\n      {icon && <Icon name={icon} />}\n      {text}\n    </button>\n  );\n};\n","import React, { FC, ReactElement, Children, cloneElement } from 'react';\nimport { CarouselItemProps } from './CarouselItem';\n\nexport type CarouselProps = {\n  /**\n   * The only children of the Carousel are the carousel item.\n   */\n  children?: ReactElement<CarouselItemProps>[] | ReactElement<CarouselItemProps>;\n  /**\n   * Base slide width set on the `Carousel` component level, it can be overriden for each CarouselItem by setting\n   * a `width` attribute on the `<item>` component.\n   *\n   * It can be set to either a percentage, e.g. `slideWidth=\"40%\"` or to a pixel based value `slideWidth=\"200px\"`.\n   *\n   * @default '120px'\n   */\n  slideWidth?: string;\n  /**\n   * Additional carousel class name\n   */\n  className?: string;\n};\n\n/**\n * A carousel is a nice mobile friendly way of letting a user select something\n *\n * Super simple scroll based carousel slightly inspired by [react-scroll-snap-slider](https://github.com/lifarl/react-scroll-snap-slider)\n */\nexport const Carousel: FC<CarouselProps> = ({ children, slideWidth = '120px', className = '' }) => {\n  return (\n    <div className={`mml-carousel ${className}`}>\n      <div className=\"mml-carousel__track\">\n        <div className=\"mml-carousel__slides\">\n          {Children.map(children as ReactElement, (child) =>\n            cloneElement(child, { className: 'mml-carousel__slide', slideWidth }),\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { FC, ReactNode } from 'react';\nimport { CarouselProps } from './Carousel';\n\nexport type CarouselItemProps = {\n  /**\n   * The carousel item inner components can contain any type of nodes, such as buttons, images, etc.\n   */\n  children?: ReactNode;\n  /**\n   * Determines the slide width, it can be set to either a percentage, e.g. `width=\"40%\"` or to a pixel based value `width=\"200px\"`.\n   * It defaults to the `slideWidth` prop set at the `<carousel>` level\n   *\n   * @default ''\n   */\n  width?: string;\n  /**\n   * Additional carousel item class name\n   */\n  className?: string;\n} & Pick<CarouselProps, 'slideWidth'>;\n\n/**\n * A carousel item\n */\nexport const CarouselItem: FC<CarouselItemProps> = ({ children, slideWidth, width = '', className = '' }) => {\n  const finalWidth = width || slideWidth;\n  return (\n    <div className={`mml-carousel-item ${className}`} style={{ flex: `0 0 ${finalWidth}`, minWidth: finalWidth }}>\n      {children}\n    </div>\n  );\n};\n","import React, { FC, ReactNode } from 'react';\n\nexport type ColProps = {\n  /** The column children can be anything */\n  children?: ReactNode;\n  /** The width of the column (grid is by default made of 12 columns, you can change it with scss variable `$mml-grid-columns`) */\n  width?: number | 'auto';\n  /** The offset for the column */\n  offset?: number;\n  /** Align horizontally */\n  align?: 'left' | 'center' | 'right';\n};\n\n/**\n * A grid column\n * TODO: Consider renaming this element\n */\nexport const Col: FC<ColProps> = ({ children, width = 12, offset = 0, align = 'left' }) => {\n  let classNames = `mml-col-${width}`;\n  if (offset) classNames = classNames + ` mml-offset-${offset}`;\n  classNames = classNames + ` mml-align-${align}`;\n\n  return <div className={classNames}>{children}</div>;\n};\n","import React, { FC } from 'react';\n\nexport type ErrorProps = {\n  /** The error message */\n  error?: string;\n};\n\nexport const Error: FC<ErrorProps> = ({ error = '' }) => {\n  if (!error) return null;\n  return <span className=\"mml-error\">{error}</span>;\n};\n","import React, { FC } from 'react';\n\nexport type ImageProps = {\n  /** The url to load the image from */\n  src: string;\n  /** The alt tag for the image */\n  alt?: string;\n  /** The title tag for the image */\n  title?: string;\n  /** Additional class name */\n  className?: string;\n};\n\nexport const Image: FC<ImageProps> = ({ src, alt = '', title = '', className = '' }) => {\n  return <img className={`mml-image ${className}`.trim()} src={src} alt={alt} title={title} />;\n};\n","import React, { FC, useState } from 'react';\n\nexport type InputProps = {\n  /** The name of the input */\n  name: string;\n  /** The label of the input (it is presented as a `CardHeader` */\n  label?: string;\n  /** Initial value of the input */\n  value?: string;\n  /** The input type */\n  type?: string;\n  /** The placeholder of the input field */\n  placeholder?: string;\n};\n\n/**\n * Text input element. Usually you'll want to rely on regular messages\n */\nexport const Input: FC<InputProps> = ({ name, label, value = '', type = 'text', placeholder = '' }) => {\n  const [state, setState] = useState(value);\n  const id = `mml-${name}`;\n\n  return (\n    <>\n      {label && (\n        <label className=\"mml-card-header\" htmlFor={id}>\n          <span className=\"mml-card-header__text\">{label}</span>\n        </label>\n      )}\n      <input\n        id={id}\n        className=\"mml-input\"\n        name={name}\n        value={state}\n        type={type}\n        placeholder={placeholder}\n        onChange={(event) => setState(event.target.value)}\n      />\n    </>\n  );\n};\n","import React, { FC } from 'react';\n\nexport type ProgressProps = {\n  /**\n   * The size of the progress spinner sets the diameter of the animated circle, it allows to override a specific progress size despite the default CSS value\n   * @default 'SCSS: $mml-progress-width: 1em'\n   */\n  size?: string | number;\n  /**\n   * The thickness of the circle, (it sets the `stroke-wdith` svg attribute)\n   * @default 3.6\n   */\n  thickness?: string | number;\n  /**\n   * The color of the progress circle, it allows to override a specific progress color despite the default CSS value\n   * @default 'SCSS: $mml-progress-color: #bbb'\n   */\n  color?: string;\n};\n\nconst SIZE = 44;\n\nexport const Progress: FC<ProgressProps> = ({ size, thickness = 3.6, color }) => {\n  thickness = typeof thickness === 'string' ? parseFloat(thickness) : thickness;\n  // interpret a digit only string or a number as a pixel value otherwise leave\n  // it as astring, it might be a value like `2em` or `120%`\n  size = (typeof size === 'string' && /^\\d+$/.test(size)) || typeof size === 'number' ? size + 'px' : size;\n\n  return (\n    <span className=\"mml-progress\" role=\"progressbar\" style={{ width: size, height: size, color }}>\n      <svg className=\"mml-progress__svg\" viewBox={`${SIZE / 2} ${SIZE / 2} ${SIZE} ${SIZE}`}>\n        <circle\n          className=\"mml-progress__circle\"\n          cx={SIZE}\n          cy={SIZE}\n          r={(SIZE - thickness) / 2}\n          fill=\"none\"\n          strokeWidth={thickness}\n        />\n      </svg>\n    </span>\n  );\n};\n","import React, { FC } from 'react';\nimport { Progress, ProgressProps } from './Progress';\n\nexport type LoadingProps = {\n  /**\n   * Flag that indicates whether the component should show\n   * @default false\n   */\n  loading?: boolean;\n  /**\n   * Optional text to display besides the progress indicator\n   */\n  text?: string;\n  /**\n   * Additional element class name\n   * @default ''\n   */\n  className?: string;\n} & ProgressProps;\n\n/**\n * Loading indicator\n */\nexport const Loading: FC<LoadingProps> = ({ className = '', loading = false, text, size, thickness, color }) => {\n  if (!loading) return null;\n\n  return (\n    <div className={`mml-loading ${className}`}>\n      <Progress {...{ size, thickness, color }} />\n      {text && <div className=\"mml-loading__text\">{text}</div>}\n    </div>\n  );\n};\n","import React, { FC, ReactElement } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport * as linkify from 'linkifyjs';\n\nexport const truncate = (input: string, length: number, end = '...') => {\n  if (input.length > length) return `${input.substring(0, length - end.length)}${end}`;\n  return input;\n};\n\nconst matchMarkdownLinks = (message: string) => {\n  const regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  const matches = message.match(regexMdLinks);\n  const singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n\n  const links = matches\n    ? matches.map((match) => {\n        const i = singleMatch.exec(match);\n        return i && i[2];\n      })\n    : [];\n  return links;\n};\n\nconst MDLinkRender: FC<{ href: string; children: ReactElement }> = (props) => {\n  if (!props.href || (!props.href.startsWith('http') && !props.href.startsWith('mailto:'))) return props.children;\n  return (\n    <a href={props.href} target=\"_blank\" rel=\"nofollow noreferrer noopener\">\n      {props.children}\n    </a>\n  );\n};\n\nconst markDownRenderers = { link: MDLinkRender };\n\nconst allowedMarkups: ReactMarkdown.NodeType[] = [\n  'html',\n  // @ts-ignore\n  'root',\n  'text',\n  'break',\n  'paragraph',\n  'emphasis',\n  'strong',\n  'link',\n  'list',\n  'listItem',\n  'code',\n  'inlineCode',\n  'blockquote',\n];\n\nexport type MDProps = {\n  /** The markdown text */\n  text: string;\n};\n\n/**\n * MD renders a given text as markdown\n */\nexport const MD: FC<MDProps> = ({ text }) => {\n  if (!text) return null;\n\n  let newText = text;\n  let markdownLinks = matchMarkdownLinks(newText);\n  // extract all valid links/emails within text and replace it with proper markup\n  linkify.find(newText).forEach(({ type, href, value }) => {\n    // check if message is already  markdown\n    const noParsingNeeded = markdownLinks && markdownLinks.filter((text) => text?.indexOf(href) !== -1);\n    if (noParsingNeeded.length > 0) return;\n\n    const displayLink = type === 'email' ? value : truncate(value.replace(/(http(s?):\\/\\/)?(www\\.)?/, ''), 20);\n    newText = newText.replace(value, `[${displayLink}](${encodeURI(href)})`);\n  });\n\n  return (\n    <div className=\"mml-md\">\n      <ReactMarkdown\n        allowedTypes={allowedMarkups}\n        renderers={markDownRenderers}\n        source={newText}\n        escapeHtml={true}\n        unwrapDisallowed={true}\n        transformLinkUri={(uri) => (uri.startsWith('app://') ? uri : ReactMarkdown.uriTransformer(uri))}\n      />\n    </div>\n  );\n};\n","import React, { useState, FC } from 'react';\nimport { Icon } from './Icon';\n\nexport type NumberProps = {\n  /** The name of the number */\n  name: string;\n  /** The initial integer value */\n  value: string | number;\n};\n\n/**\n * Mobile friendly number input\n */\nexport const Number: FC<NumberProps> = ({ name, value }) => {\n  const [state, setState] = useState(parseInt(`${value}`, 10) || 0);\n\n  return (\n    <div className=\"mml-number\">\n      <input name={name} value={state} type=\"hidden\" />\n      <span className=\"mml-btn mml-btn--floating mml-btn--icon mml-number__dec\" onClick={() => setState(state - 1)}>\n        <Icon name=\"remove\" />\n      </span>\n      <span className=\"mml-number__count\">{state}</span>\n      <span className=\"mml-btn mml-btn--floating mml-btn--icon mml-number__inc\" onClick={() => setState(state + 1)}>\n        <Icon name=\"add\" />\n      </span>\n    </div>\n  );\n};\n","import React, { FC, ReactElement } from 'react';\n\nimport { ColProps } from './Col';\n\nexport type RowProps = {\n  /** The children of a row must be columns */\n  children?: ReactElement<ColProps>[] | ReactElement<ColProps>;\n};\n\nexport const Row: FC<RowProps> = ({ children }) => {\n  return <div className=\"mml-row\">{children}</div>;\n};\n","import React, { useState, useRef, useCallback, useEffect, FC } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\nimport { Dayjs } from 'dayjs';\nimport { DatePickerProps } from './DatePicker';\n\nexport type DatePickerSelectProps = DatePickerSelectReadyProps & {\n  itemClassName?: string;\n  getItemData: (props: DatePickerSelectItemProps) => DatePickerItemData;\n};\n\n/**\n * Basic shape of DatePickerSelect extended by wrapper components as DatePickerDate and DatePickerTime\n */\nexport type DatePickerSelectReadyProps = Pick<DatePickerProps, 'icalFilter'> & {\n  format: string;\n  interval: number;\n  onChange: (value: Dayjs) => void;\n  value: Dayjs;\n};\n\n/**\n * Inside Virtuoso select items need an idx to indicate their position\n */\nexport type DatePickerSelectItemProps = {\n  format: string;\n  idx: number;\n  interval: number;\n  value: Dayjs;\n};\n\n/**\n * The data needed by each datepicker select item\n */\nexport type DatePickerItemData = {\n  displayValue: string;\n  idx: number;\n  isSelected: (currentValue: Dayjs) => boolean;\n  value: Dayjs;\n};\n\nconst ITEMS_PER_PAGE = 40;\nconst VERTICAL_COMPENSATION = 3;\nconst INITIAL_INDEX = ITEMS_PER_PAGE;\nconst VIRTUOSO_START_INDEX = 10000;\n\n/**\n * DatePicker select\n */\nexport const DatePickerSelect: FC<DatePickerSelectProps> = (props) => {\n  const { onChange, icalFilter, getItemData, itemClassName, interval, format, value } = props;\n\n  // Generate date items\n  const generateItems = useCallback(\n    (quantity: number, firstIdx: number) => {\n      return Array(quantity)\n        .fill(true)\n        .map((_, idx) => getItemData({ interval, format, value, idx: firstIdx + idx }))\n        .filter((newItem) => !icalFilter || (icalFilter && icalFilter(newItem.value)));\n    },\n    [interval, format, value, icalFilter, getItemData],\n  );\n\n  const [items, setItems] = useState<DatePickerItemData[]>(generateItems(ITEMS_PER_PAGE * 2, -ITEMS_PER_PAGE));\n  const [firstItemIndex, setFirstItemIndex] = useState(VIRTUOSO_START_INDEX);\n\n  const initialIndexOffset = useRef(INITIAL_INDEX);\n  const [selectedIdx, setSelectedIdx] = useState<number | null>(null);\n\n  const handleClick = useCallback(\n    (item: DatePickerItemData) => {\n      onChange(item.value);\n\n      const firstItemIndex = initialIndexOffset.current || 0;\n      let nextFirstItemIdx = firstItemIndex - INITIAL_INDEX - ITEMS_PER_PAGE;\n      const missingTopItems = nextFirstItemIdx - item.idx + VERTICAL_COMPENSATION;\n\n      // prepend date items, when the selected date's index is too low we prepend\n      // some date options so that it will remain vertically centered in the middle\n      if (missingTopItems >= 0) {\n        nextFirstItemIdx -= missingTopItems;\n        initialIndexOffset.current -= firstItemIndex - missingTopItems;\n        setItems((items) => [...generateItems(missingTopItems, nextFirstItemIdx), ...items]);\n      }\n      setSelectedIdx(item.idx);\n    },\n    [setItems, generateItems, initialIndexOffset, onChange],\n  );\n\n  const appendItems = useCallback(\n    (lastItemIndex) => {\n      setItems((items) => [...items, ...generateItems(ITEMS_PER_PAGE, lastItemIndex)]);\n    },\n    [setItems, generateItems],\n  );\n\n  // @see https://git.io/JIUuo\n  const prependItems = useCallback(() => {\n    const firstItemIndex = initialIndexOffset.current || 0;\n    const nextFirstItemIdx = firstItemIndex - INITIAL_INDEX - ITEMS_PER_PAGE;\n    if (initialIndexOffset) {\n      initialIndexOffset.current -= ITEMS_PER_PAGE;\n    }\n    setItems((items) => [...generateItems(ITEMS_PER_PAGE, nextFirstItemIdx), ...items]);\n    setFirstItemIndex(firstItemIndex - ITEMS_PER_PAGE);\n    return false;\n  }, [setItems, generateItems, initialIndexOffset]);\n\n  // on mount check if there is a selected value and save its idx in state\n  useEffect(() => {\n    if (value) {\n      let initialSelectedIdx = null;\n      for (let i = 0; i < items.length; i++) {\n        if (items[i].isSelected(value)) {\n          initialSelectedIdx = items[i].idx;\n          break;\n        }\n      }\n      setSelectedIdx(initialSelectedIdx);\n    }\n  }, []); // eslint-disable-line\n\n  return (\n    <Virtuoso\n      data={items}\n      firstItemIndex={firstItemIndex}\n      itemContent={(_, item) => (\n        <div\n          className={\n            itemClassName + ` mml-datepicker__item ${item.idx === selectedIdx ? 'mml-datepicker__item--selected' : ''}`\n          }\n          onClick={() => handleClick(item)}\n        >\n          {item.displayValue}\n        </div>\n      )}\n      endReached={appendItems}\n      startReached={prependItems}\n    />\n  );\n};\n","import React, { FC } from 'react';\nimport dayjs, { Dayjs } from 'dayjs';\n\nimport { DatePickerProps } from './DatePicker';\nimport { DatePickerSelect, DatePickerSelectReadyProps, DatePickerSelectProps } from './DatePickerSelect';\n\nexport type DatePickerDateProps = DatePickerSelectReadyProps & {\n  format: NonNullable<DatePickerProps['dateFormat']>;\n  interval: NonNullable<DatePickerProps['dateInterval']>;\n};\n\n/**\n * Get item data\n */\nconst getItemData: DatePickerSelectProps['getItemData'] = (props) => {\n  const { idx, interval, value, format } = props;\n  const newValue =\n    idx >= 0\n      ? dayjs(value).add(idx * (interval * 24), 'hour')\n      : dayjs(value).subtract(idx * (interval * 24) * -1, 'hour');\n\n  return {\n    idx,\n    value: newValue,\n    displayValue: dayjs(newValue).format(format),\n    isSelected: (currentValue: Dayjs) =>\n      dayjs(newValue).isSame(interval === 1 ? dayjs(currentValue) : dayjs(currentValue).add(interval, 'day'), 'date'),\n  };\n};\n\n/**\n * DatePicker date\n */\nexport const DatePickerDate: FC<DatePickerDateProps> = (props) => (\n  <div className=\"mml-datepicker__select mml-datepicker__date\">\n    <DatePickerSelect {...props} itemClassName=\"mml-datepicker__item--day\" getItemData={getItemData} />\n  </div>\n);\n","import React, { FC } from 'react';\nimport dayjs, { Dayjs } from 'dayjs';\nimport isBetween from 'dayjs/plugin/isBetween';\n\nimport { DatePickerProps } from './DatePicker';\nimport { DatePickerSelect, DatePickerSelectProps, DatePickerSelectReadyProps } from './DatePickerSelect';\n\ndayjs.extend(isBetween);\n\nexport type DatePickerTimeProps = DatePickerSelectReadyProps & {\n  format: NonNullable<DatePickerProps['timeFormat']>;\n  interval: NonNullable<DatePickerProps['timeInterval']>;\n};\n\n/**\n * Get item data\n */\nconst getItemData: DatePickerSelectProps['getItemData'] = (props) => {\n  const { idx, interval, value, format } = props;\n  const newValue =\n    idx >= 0 ? dayjs(value).add(idx * interval, 'minute') : dayjs(value).subtract(idx * -1 * interval, 'minute');\n\n  return {\n    idx,\n    value: newValue,\n    displayValue: dayjs(newValue).format(format),\n    isSelected: (currentValue: Dayjs) =>\n      dayjs(newValue).isBetween(currentValue, dayjs(currentValue).add(interval - 1, 'minute'), 'minute', '[]'),\n  };\n};\n\n/**\n * DatePicker time\n */\nexport const DatePickerTime: FC<DatePickerTimeProps> = (props) => (\n  <div className=\"mml-datepicker__select mml-datepicker__time\">\n    <DatePickerSelect {...props} itemClassName=\"mml-datepicker__item--time\" getItemData={getItemData} />\n  </div>\n);\n","import React, { useState, FC } from 'react';\nimport { Dayjs } from 'dayjs';\n\nimport { DatePickerDate } from './DatePickerDate';\nimport { DatePickerTime } from './DatePickerTime';\n\nexport type DatePickerProps = {\n  /** The scheduler name attached to hidden input */\n  name: string;\n  /** The selected date time */\n  selected: Dayjs;\n  /** Interval in days for time selection */\n  dateInterval: number;\n  /**  Interval in minutes for time selection */\n  timeInterval: number;\n  /** Show only the date picker(without time picker) */\n  fullDay: boolean;\n  /** Date format, see [dayjs docs](https://day.js.org/docs/en/display/format) */\n  dateFormat: string;\n  /** Time format, see [dayjs docs](https://day.js.org/docs/en/display/format) */\n  timeFormat: string;\n  /** Filter dates, it should return a boolean */\n  icalFilter: (date: Dayjs) => boolean;\n};\n\nexport const DatePicker: FC<DatePickerProps> = ({\n  name,\n  selected,\n  dateInterval,\n  timeInterval,\n  dateFormat,\n  timeFormat,\n  fullDay,\n  icalFilter,\n}) => {\n  const [date, setDate] = useState(selected);\n\n  const handleChangeDate = (value: Dayjs) => {\n    setDate((prevDate) =>\n      prevDate\n        .set('date', value.get('date'))\n        .set('month', value.get('month'))\n        .set('year', value.get('year')),\n    );\n  };\n\n  const handleChangeTime = (value: Dayjs) => {\n    setDate((prevDate) => prevDate.set('minute', value.get('minute')).set('hour', value.get('hour')));\n  };\n\n  return (\n    <div className={`mml-datepicker mml-datepicker--${fullDay ? 'single' : 'double'}`}>\n      <input name={name} value={date.toISOString()} type=\"hidden\" />\n\n      <DatePickerDate\n        icalFilter={icalFilter}\n        format={dateFormat}\n        value={date}\n        onChange={handleChangeDate}\n        interval={dateInterval}\n      />\n\n      {!fullDay && (\n        <DatePickerTime\n          icalFilter={icalFilter}\n          format={timeFormat}\n          value={date}\n          onChange={handleChangeTime}\n          interval={timeInterval}\n        />\n      )}\n    </div>\n  );\n};\n","import React, { useState, useEffect, FC } from 'react';\n// @ts-ignore\nimport IcalExpander from 'ical-expander';\nimport dayjs, { Dayjs } from 'dayjs';\n\nimport { DatePicker } from './DatePicker';\nimport { Card } from './Card';\nimport { CardHeader } from './CardHeader';\nimport { CardBody } from './CardBody';\nimport { Error as ErrorComponent } from './Error';\nimport { Loading as LoadingComponent } from './Loading';\n\nexport type SchedulerProps = {\n  /**\n   * The scheduler name attached to hidden input\n   */\n  name: string;\n  /**\n   * The selected date, it must be a valid parseable date string\n   */\n  selected?: string;\n  /**\n   * Interval in days for day selection\n   * @default 1\n   */\n  dateInterval?: number;\n  /**\n   * Interval in minutes for time selection\n   * @default 30\n   */\n  timeInterval?: number;\n  /**\n   * Date format, see [dayjs docs](https://day.js.org/docs/en/display/format)\n   * @default 'ddd MMM DD'\n   */\n  dateFormat?: string;\n  /**\n   * Time format, see [dayjs docs](https://day.js.org/docs/en/display/format)\n   * @default 'hh:mm A'\n   */\n  timeFormat?: string;\n  /**\n   * The duration of the event in minutes, used to check availability with ical\n   * @default 30\n   */\n  duration?: number;\n  /**\n   * ICal availability public URL\n   */\n  icalAvailability?: string;\n  /**\n   * Show only the date picker(without time picker) if events lasts a whole day\n   * @default false\n   */\n  fullDay?: boolean;\n};\n\nexport type ICalFilter = (start?: Dayjs) => boolean;\n\nconst setupIcalFilter = async (icalURL: string, duration: number) => {\n  const response = await fetch(icalURL, { method: 'GET', redirect: 'follow', credentials: 'same-origin' });\n  const body = await response.text();\n  if (!response.ok) throw new Error(body);\n\n  const icalExpander = new IcalExpander({ ics: body, maxIterations: 10 });\n\n  return () => (start?: Dayjs) => {\n    if (!start) return true;\n    const { events } = icalExpander.between(start.toDate(), start.add(duration, 'minute').toDate());\n    return !events.length;\n  };\n};\n\nexport const Scheduler: FC<SchedulerProps> = ({\n  name,\n  selected,\n  icalAvailability,\n  duration = 30,\n  dateInterval = 1,\n  timeInterval = 30,\n  dateFormat = 'ddd MMM DD',\n  timeFormat = 'hh:mm A',\n  fullDay = false,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [icalFilter, setIcalFilter] = useState<ICalFilter>(() => () => true);\n\n  useEffect(() => {\n    if (!icalAvailability) return;\n\n    setLoading(true);\n    setupIcalFilter(icalAvailability, duration)\n      .then(setIcalFilter)\n      .catch((err) => {\n        console.warn('loading ical failed', { icalAvailability, err });\n        setError('iCal availability could not be loaded');\n      })\n      .finally(() => setLoading(false));\n  }, [icalAvailability, duration]);\n\n  return (\n    <Card className=\"mml-scheduler\">\n      <CardHeader icon=\"date_range\" text=\"Scheduler\" />\n      <CardBody>\n        {error && !loading && <ErrorComponent error={`Failed, error: ${error}`} />}\n        {!error && loading && <LoadingComponent loading={true} text=\"Loading availability\" />}\n        {!error && !loading && (\n          <DatePicker\n            name={name}\n            selected={selected ? dayjs(selected) : dayjs().startOf('hour')}\n            dateInterval={dateInterval}\n            timeInterval={timeInterval}\n            dateFormat={dateFormat}\n            timeFormat={timeFormat}\n            fullDay={fullDay}\n            icalFilter={icalFilter}\n          />\n        )}\n      </CardBody>\n    </Card>\n  );\n};\n","import React, { FC } from 'react';\n\nexport type SuccessProps = { success?: string };\n\nexport const Success: FC<SuccessProps> = ({ success }) => {\n  if (success) return <div className=\"mml-success\">{success}</div>;\n\n  return null;\n};\n","import React, { FC } from 'react';\n\nexport type TextProps = {\n  /** Text to render */\n  text: string;\n  /** Additional class name */\n  className?: string;\n};\n\n/**\n * Simple paragraph text element\n */\nexport const Text: FC<TextProps> = ({ text, className = '' }) => {\n  return <div className={`mml-text ${className}`.trim()}>{text}</div>;\n};\n","import React, { ReactElement } from 'react';\n\nimport { MMLTag } from './MMLTag';\nimport {\n  AddToCalendar,\n  Button,\n  ButtonList,\n  Carousel,\n  CarouselItem,\n  Col,\n  Icon,\n  Image,\n  Input,\n  MD,\n  Scheduler,\n  Text,\n  Row,\n  Number,\n} from '../components';\n\nexport type ConvertorType = (tag: MMLTag, children?: ReactElement[]) => ReactElement;\n\n/**\n * The converters maps MML tags to react nodes\n * Every converter is passed the MML tag as well as the children (as React nodes)\n */\nexport const converters = {\n  button: (tag: MMLTag) => {\n    return (\n      <Button\n        {...tag.attributes}\n        key={tag.key}\n        text={tag.getText()}\n        name={tag.attributes.name}\n        value={tag.attributes.value}\n      />\n    );\n  },\n  button_list: (tag: MMLTag, children?: JSX.Element[]) => {\n    return (\n      <ButtonList {...tag.attributes} key={tag.key}>\n        {children}\n      </ButtonList>\n    );\n  },\n  input: (tag: MMLTag) => {\n    return <Input {...tag.attributes} key={tag.key} name={tag.attributes.name} value={tag.attributes.value} />;\n  },\n  add_to_calendar: (tag: MMLTag) => {\n    return (\n      <AddToCalendar\n        {...tag.attributes}\n        key={tag.key}\n        title={tag.attributes.title}\n        start={tag.attributes.start}\n        end={tag.attributes.end}\n      />\n    );\n  },\n  col: (tag: MMLTag, children?: JSX.Element[]) => {\n    return (\n      <Col {...tag.attributes} key={tag.key}>\n        {children}\n      </Col>\n    );\n  },\n  row: (tag: MMLTag, children?: JSX.Element[]) => {\n    return (\n      <Row {...tag.attributes} key={tag.key}>\n        {children}\n      </Row>\n    );\n  },\n  icon: (tag: MMLTag) => {\n    return <Icon {...tag.attributes} key={tag.key} name={tag.attributes.name} />;\n  },\n  image: (tag: MMLTag) => {\n    return <Image {...tag.attributes} key={tag.key} src={tag.attributes.src} />;\n  },\n  md: (tag: MMLTag) => {\n    return <MD {...tag.attributes} key={tag.key} text={tag.getText()} />;\n  },\n  text: (tag: MMLTag) => {\n    return <Text {...tag.attributes} key={tag.key} text={tag.getText()} />;\n  },\n  scheduler: (tag: MMLTag) => {\n    return (\n      <Scheduler\n        {...tag.attributes}\n        key={tag.key}\n        name={tag.attributes.name}\n        dateInterval={parseInt(tag.attributes.dateInterval, 10) || 1} // default to 1 day\n        timeInterval={parseInt(tag.attributes.timeInterval, 10) || 30} // default to 30 minutes\n        duration={parseInt(tag.attributes.duration, 10) || 30} // default to 30 minutes\n        selected={tag.attributes.selected}\n        fullDay={tag.attributes.fullDay === 'true'}\n        icalAvailability={tag.attributes.icalAvailability}\n      />\n    );\n  },\n  carousel: (tag: MMLTag, children?: JSX.Element[]) => {\n    return (\n      <Carousel slideWidth={tag.attributes.slideWidth} {...tag.attributes} key={tag.key}>\n        {children}\n      </Carousel>\n    );\n  },\n  item: (tag: MMLTag, children?: JSX.Element[]) => {\n    return (\n      <CarouselItem {...tag.attributes} key={tag.key}>\n        {children}\n      </CarouselItem>\n    );\n  },\n  number: (tag: MMLTag) => {\n    return <Number {...tag.attributes} key={tag.key} name={tag.attributes.name} value={tag.attributes.value} />;\n  },\n};\n","import { ReactElement } from 'react';\nimport { XmlElement } from '@rgrove/parse-xml';\n\nimport { MMLTag } from './MMLTag';\nimport { converters as defaultConverters, ConvertorType } from './converters';\n\n/** The type attribute of <mml> determine how its inner content is visually displayed */\nexport type RootType = 'card';\n\n/**\n * Tree - The tree object for MML tags\n */\nexport class Tree {\n  converters: Record<string, ConvertorType>;\n  node: XmlElement;\n  children: MMLTag[];\n  reactElements: ReactElement[];\n  name?: string;\n  type?: RootType;\n\n  constructor(node: XmlElement, children: MMLTag[], customConvertors?: Record<string, ConvertorType>) {\n    this.converters = { ...defaultConverters, ...customConvertors };\n    this.node = node;\n    this.children = children;\n    this.reactElements = this.toReact();\n\n    this.name = node.attributes.name;\n    this.type = node.attributes.type as RootType;\n  }\n\n  /**\n   * convert all nodes to react and maintain the hierarchy\n   */\n  toReact(parent: Tree | MMLTag = this) {\n    const reactNodes: ReactElement[] = [];\n\n    (parent.children || []).forEach((child, i) => {\n      const converter = this.converters[child.name];\n      if (!converter || !Object.hasOwnProperty.call(this.converters, child.name)) {\n        throw Error(\n          `Converter not found for tag ${child.name}, Available converters are ${Object.keys(this.converters)}`,\n        );\n      }\n\n      const children = this.toReact(child);\n      child.key = `tag-${child.name}-position-${i}`;\n      reactNodes.push(converter(child, children));\n    });\n\n    return reactNodes;\n  }\n}\n","import parseXml from '@rgrove/parse-xml';\n\nimport { ConvertorType } from './converters';\nimport { MMLTag } from './MMLTag';\nimport { Tree } from './tree';\n\n/**\n * SourceToXML - Takes an MML string and converts it to XML nodes\n *\n * @param {string} source MML tag string\n *\n * @returns {array} an Array of XML nodes\n */\nexport function SourceToXML(source: string) {\n  let src = source.trim();\n  // the wrapping MML tags are optional, for parsing simplicity we automatically add them if they are not already there\n  if (!src.startsWith('<mml')) src = `<mml>${source}</mml>`;\n\n  // emulate HTML handling of & escaping\n  const unescapedAmps = /&(?!amp;|lt;|gt;)/g;\n  src = src.replace(unescapedAmps, '&amp;');\n\n  // convert the string to XML nodes\n  // this library is relatively lightweight and doesn't do a ton of validation\n  return parseXml(src);\n}\n\nfunction convertNodes(nodes: parseXml.XmlNode[]) {\n  return nodes.reduce((acc: MMLTag[], node: parseXml.XmlNode) => {\n    const element = node as parseXml.XmlElement;\n    let children;\n    if (element.children) children = convertNodes(element.children);\n\n    let { name } = element;\n    if ((node as parseXml.XmlText).type === 'text') {\n      if ((node as parseXml.XmlText).text.trim().length) name = 'text';\n      else return acc; // skip empty text elements\n    }\n\n    acc.push(new MMLTag(name, node as parseXml.XmlElement | parseXml.XmlText, children));\n    return acc;\n  }, []);\n}\n\n/**\n * XMLtoMMLTree - Takes an array of XML nodes and converts it into an MML Tree\n *\n * @param {type} XMLNodes an array of XML nodes\n *\n * @returns {MMLTree} The MML tree\n */\nexport function XMLtoMMLTree(document: parseXml.XmlDocument, customConvertors?: Record<string, ConvertorType>) {\n  if (!document || !document.children || !document.children.length) throw new Error('bad input');\n\n  const mmlNode = document.children[0] as parseXml.XmlElement;\n  if (mmlNode.name !== 'mml') throw new Error('missing mml tag');\n\n  return new Tree(mmlNode, convertNodes(mmlNode.children), customConvertors);\n}\n\n/**\n * Takes an MML string and returns an MML Tree\n *\n * @param {string} source MML tag string\n *\n *  @returns {Tree} An MML Tree\n */\nexport function Parse(source: string, customConvertors?: Record<string, ConvertorType>) {\n  const XMLNodes = SourceToXML(source);\n  return XMLtoMMLTree(XMLNodes, customConvertors);\n}\n","import React, { useState, useMemo, useCallback, FC, ComponentType, FormEvent } from 'react';\n\nimport { Parse, ConvertorType } from '../parser';\nimport { Loading as LoadingComponent, LoadingProps } from '../components/Loading';\nimport { Error as ErrorComponent, ErrorProps } from '../components/Error';\nimport { Success as SuccessComponent, SuccessProps } from '../components/Success';\n\nexport type MMLProps = {\n  /** The MML string source to render */\n  source: string;\n  /** The convert config allows you to overwrite the MML to react conversion */\n  converters?: Record<string, ConvertorType>;\n  /** The submit callback whenever a form is submitted, submit is expected to return a promise */\n  onSubmit?: (data: Record<string, any>) => Promise<any> | any;\n  /** Select a theme from built in available themes, it will be added as a className to the container(root) div */\n  theme?:\n    | 'base-dark'\n    | 'messaging-light'\n    | 'messaging-dark'\n    | 'team-light'\n    | 'team-dark'\n    | 'commerce-light'\n    | 'commerce-dark'\n    | 'livestream-light'\n    | 'livestream-dark'\n    | string;\n  /** Custom classname, appended to wrapper classname */\n  className?: string;\n  /** The Loading component, accepts null to render nothing */\n  Loading?: ComponentType<LoadingProps> | null;\n  /** The error component, accepts null to render nothing */\n  Error?: ComponentType<ErrorProps> | null;\n  /** The success message component, accepts null to render nothing */\n  Success?: ComponentType<SuccessProps> | null;\n};\n\n/**\n * MML root component\n */\nexport const MML: FC<MMLProps> = ({\n  source,\n  onSubmit,\n  converters,\n  theme = '',\n  className = '',\n  Loading = LoadingComponent,\n  Error = ErrorComponent,\n  Success = SuccessComponent,\n}) => {\n  const [error, setError] = useState('');\n  const [submitState, setSubmitState] = useState({ loading: false, error: '', success: '' });\n  const tree = useMemo(() => {\n    try {\n      return Parse(source, converters);\n    } catch (e) {\n      console.warn('mml parsing error: ', source, e);\n      setError(\"This chat message has invalid formatting and can't be shown\");\n      return null;\n    }\n  }, [source, converters]);\n\n  const handleSubmit = useCallback(\n    async (event: FormEvent<HTMLFormElement>) => {\n      event.preventDefault();\n\n      const state: Record<string, any> = {};\n      if (tree?.name) state.mml_name = tree.name; // include mml_name in the data\n      new FormData(event.currentTarget).forEach((value, key) => {\n        state[key] = value;\n      });\n\n      if (!onSubmit) return console.warn('Forgot to pass onSubmit prop to <MML/>? payload:', state);\n\n      try {\n        setSubmitState({ loading: true, error: '', success: '' });\n        await onSubmit(state);\n        setSubmitState({ loading: false, error: '', success: 'submitted' });\n      } catch (e) {\n        setSubmitState({ loading: false, error: 'Failed to send the request. Please try again.', success: '' });\n      }\n    },\n    [onSubmit, tree],\n  );\n\n  return (\n    <div className={`mml-container ${theme} ${className}`} data-testid=\"mml-container\">\n      {error ? (\n        <div className=\"mml-wrap\">{Error && <Error error={error} />}</div>\n      ) : (\n        <form onSubmit={handleSubmit} className=\"mml-wrap\" data-testid=\"mml-form\">\n          {tree?.type ? <div className=\"mml-card\">{tree?.reactElements}</div> : tree?.reactElements}\n          {submitState.loading && Loading && <Loading loading={submitState.loading} />}\n          {submitState.success && Success && <Success success={submitState.success} />}\n          {submitState.error && Error && <Error error={submitState.error} />}\n        </form>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}