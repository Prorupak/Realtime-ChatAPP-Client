{"ast":null,"code":"import _regeneratorRuntime from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Cookies from'universal-cookie';import axios from'axios';import sign from\"../assets/sign.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cookies=new Cookies();var initialState={fullName:'',username:'',password:'',confirmPassword:'',phoneNumber:'',avatarURL:''};var Auth=function Auth(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isSignup=_useState4[0],setIsSignup=_useState4[1];var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var username,password,phoneNumber,avatarURL,URL,_yield$axios$post,_yield$axios$post$dat,token,userId,hashedPassword,fullName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();username=form.username,password=form.password,phoneNumber=form.phoneNumber,avatarURL=form.avatarURL;URL='http://localhost:5000/auth';// const URL = 'https://medical-pager.herokuapp.com/auth';\n_context.next=5;return axios.post(\"\".concat(URL,\"/\").concat(isSignup?'signup':'login'),{username:username,password:password,fullName:form.fullName,phoneNumber:phoneNumber,avatarURL:avatarURL});case 5:_yield$axios$post=_context.sent;_yield$axios$post$dat=_yield$axios$post.data;token=_yield$axios$post$dat.token;userId=_yield$axios$post$dat.userId;hashedPassword=_yield$axios$post$dat.hashedPassword;fullName=_yield$axios$post$dat.fullName;cookies.set('token',token);cookies.set('username',username);cookies.set('fullName',fullName);cookies.set('userId',userId);if(isSignup){cookies.set('phoneNumber',phoneNumber);cookies.set('avatarURL',avatarURL);cookies.set('hashedPassword',hashedPassword);}window.location.reload();case 17:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var switchMode=function switchMode(){setIsSignup(function(prevIsSignup){return!prevIsSignup;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:isSignup?'Sign Up':'Sign In'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fullName\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"fullName\",type:\"text\",placeholder:\"Full Name\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",type:\"text\",placeholder:\"Username\",onChange:handleChange,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phoneNumber\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phoneNumber\",type:\"text\",placeholder:\"Phone Number\",onChange:handleChange,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatarURL\",children:\"Avatar URL\"}),/*#__PURE__*/_jsx(\"input\",{name:\"avatarURL\",type:\"text\",placeholder:\"Avatar URL\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Password\",onChange:handleChange,required:true})]}),isSignup&&/*#__PURE__*/_jsxs(\"div\",{className:\"auth__form-container_fields-content_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",type:\"password\",placeholder:\"Confirm Password\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-content_button\",children:/*#__PURE__*/_jsx(\"button\",{children:isSignup?\"Sign Up\":\"Sign In\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_fields-account\",children:/*#__PURE__*/_jsxs(\"p\",{children:[isSignup?\"Already have an account?\":\"Don't have an account?\",/*#__PURE__*/_jsx(\"span\",{onClick:switchMode,children:isSignup?'Sign In':'Sign Up'})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth__form-container_image\",children:/*#__PURE__*/_jsx(\"img\",{src:sign,alt:\"sign in\"})})]});};export default Auth;","map":{"version":3,"sources":["/home/rupak/Music/project_medical_pager_chat-master/client/src/components/Auth.jsx"],"names":["React","useState","Cookies","axios","cookies","initialState","fullName","username","password","confirmPassword","phoneNumber","avatarURL","Auth","form","setForm","isSignup","setIsSignup","handleChange","e","target","name","value","handleSubmit","preventDefault","URL","post","data","token","userId","hashedPassword","set","window","location","reload","switchMode","prevIsSignup","sign"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Cookies from 'universal-cookie';\nimport axios from 'axios';\n\nimport sign from '../assets/sign.svg';\n\nconst cookies = new Cookies();\n\nconst initialState = {\n    fullName: '',\n    username: '',\n    password: '',\n    confirmPassword: '',\n    phoneNumber: '',\n    avatarURL: '',\n}\n\nconst Auth = () => {\n    const [form, setForm] = useState(initialState);\n    const [isSignup, setIsSignup] = useState(true);\n\n    const handleChange = (e) => {\n        setForm({ ...form, [e.target.name]: e.target.value });\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const { username, password, phoneNumber, avatarURL } = form;\n\n        const URL = 'http://localhost:5000/auth'\n        // const URL = 'https://medical-pager.herokuapp.com/auth';\n\n        const { data: { token, userId, hashedPassword, fullName } } = await axios.post(`${URL}/${isSignup ? 'signup' : 'login'}`, {\n            username, password, fullName: form.fullName, phoneNumber, avatarURL,\n        });\n\n        cookies.set('token', token);\n        cookies.set('username', username);\n        cookies.set('fullName', fullName);\n        cookies.set('userId', userId);\n\n        if(isSignup) {\n            cookies.set('phoneNumber', phoneNumber);\n            cookies.set('avatarURL', avatarURL);\n            cookies.set('hashedPassword', hashedPassword);\n        }\n\n        window.location.reload();\n    }\n\n    const switchMode = () => {\n        setIsSignup((prevIsSignup) => !prevIsSignup);\n    }\n\n    return (\n        <div className=\"auth__form-container\">\n            <div className=\"auth__form-container_fields\">\n                <div className=\"auth__form-container_fields-content\">\n                    <p>{isSignup ? 'Sign Up' : 'Sign In'}</p>\n                    <form onSubmit={handleSubmit}>\n                        {isSignup && (\n                            <div className=\"auth__form-container_fields-content_input\">\n                                <label htmlFor=\"fullName\">Full Name</label>\n                                <input \n                                    name=\"fullName\" \n                                    type=\"text\"\n                                    placeholder=\"Full Name\"\n                                    onChange={handleChange}\n                                    required\n                                />\n                            </div>\n                        )}\n                        <div className=\"auth__form-container_fields-content_input\">\n                            <label htmlFor=\"username\">Username</label>\n                                <input \n                                    name=\"username\" \n                                    type=\"text\"\n                                    placeholder=\"Username\"\n                                    onChange={handleChange}\n                                    required\n                                />\n                            </div>\n                        {isSignup && (\n                            <div className=\"auth__form-container_fields-content_input\">\n                                <label htmlFor=\"phoneNumber\">Phone Number</label>\n                                <input \n                                    name=\"phoneNumber\" \n                                    type=\"text\"\n                                    placeholder=\"Phone Number\"\n                                    onChange={handleChange}\n                                    required\n                                />\n                            </div>\n                        )}\n                        {isSignup && (\n                            <div className=\"auth__form-container_fields-content_input\">\n                                <label htmlFor=\"avatarURL\">Avatar URL</label>\n                                <input \n                                    name=\"avatarURL\" \n                                    type=\"text\"\n                                    placeholder=\"Avatar URL\"\n                                    onChange={handleChange}\n                                    required\n                                />\n                            </div>\n                        )}\n                        <div className=\"auth__form-container_fields-content_input\">\n                                <label htmlFor=\"password\">Password</label>\n                                <input \n                                    name=\"password\" \n                                    type=\"password\"\n                                    placeholder=\"Password\"\n                                    onChange={handleChange}\n                                    required\n                                />\n                            </div>\n                        {isSignup && (\n                            <div className=\"auth__form-container_fields-content_input\">\n                                <label htmlFor=\"confirmPassword\">Confirm Password</label>\n                                <input \n                                    name=\"confirmPassword\" \n                                    type=\"password\"\n                                    placeholder=\"Confirm Password\"\n                                    onChange={handleChange}\n                                    required\n                                />\n                            </div>\n                            )}\n                        <div className=\"auth__form-container_fields-content_button\">\n                            <button>{isSignup ? \"Sign Up\" : \"Sign In\"}</button>\n                        </div>\n                    </form>\n                    <div className=\"auth__form-container_fields-account\">\n                        <p>\n                            {isSignup\n                             ? \"Already have an account?\" \n                             : \"Don't have an account?\"\n                             }\n                             <span onClick={switchMode}>\n                             {isSignup ? 'Sign In' : 'Sign Up'}\n                             </span>\n                        </p>\n                    </div>\n                </div> \n            </div>\n            <div className=\"auth__form-container_image\">\n                <img src={sign} alt=\"sign in\" />\n            </div>\n        </div>\n    )\n}\n\nexport default Auth\n"]},"metadata":{},"sourceType":"module"}