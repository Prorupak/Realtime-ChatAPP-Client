{"ast":null,"code":"import _regeneratorRuntime from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{Avatar,useChatContext}from'stream-chat-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var channelByUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var client,setActiveChannel,channel,setChannel,filters,_yield$client$queryCh,_yield$client$queryCh2,existingChannel,newChannel;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:client=_ref.client,setActiveChannel=_ref.setActiveChannel,channel=_ref.channel,setChannel=_ref.setChannel;filters={type:'messaging',member_count:2,members:{$eq:[client.user.id,client.userID]}};_context.next=4;return client.queryChannels(filters);case 4:_yield$client$queryCh=_context.sent;_yield$client$queryCh2=_slicedToArray(_yield$client$queryCh,1);existingChannel=_yield$client$queryCh2[0];if(!existingChannel){_context.next=9;break;}return _context.abrupt(\"return\",setActiveChannel(existingChannel));case 9:newChannel=client.channel('messaging',{members:[channel.id,client.userID]});setChannel(newChannel);return _context.abrupt(\"return\",setActiveChannel(newChannel));case 12:case\"end\":return _context.stop();}}},_callee);}));return function channelByUser(_x){return _ref2.apply(this,arguments);};}();var SearchResult=function SearchResult(_ref3){var channel=_ref3.channel,focusedId=_ref3.focusedId,type=_ref3.type,setChannel=_ref3.setChannel,setToggleContainer=_ref3.setToggleContainer;var _useChatContext=useChatContext(),client=_useChatContext.client,setActiveChannel=_useChatContext.setActiveChannel;if(type==='channel'){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){setChannel(channel);if(setToggleContainer){setToggleContainer(function(prevState){return!prevState;});}},className:focusedId===channel.id?'channel-search__result-container__focused':'channel-search__result-container',children:[/*#__PURE__*/_jsx(\"div\",{className:\"result-hashtag\",children:\"#\"}),/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__result-text\",children:channel.data.name})]});}return/*#__PURE__*/_jsx(\"div\",{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:channelByUser({client:client,setActiveChannel:setActiveChannel,channel:channel,setChannel:setChannel});if(setToggleContainer){setToggleContainer(function(prevState){return!prevState;});}case 2:case\"end\":return _context2.stop();}}},_callee2);})),className:focusedId===channel.id?'channel-search__result-container__focused':'channel-search__result-container',children:/*#__PURE__*/_jsxs(\"div\",{className:\"channel-search__result-user\",children:[/*#__PURE__*/_jsx(Avatar,{image:channel.image||undefined,name:channel.name,size:24}),/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__result-text\",children:channel.name})]})});};var ResultsDropdown=function ResultsDropdown(_ref5){var teamChannels=_ref5.teamChannels,directChannels=_ref5.directChannels,focusedId=_ref5.focusedId,loading=_ref5.loading,setChannel=_ref5.setChannel,setToggleContainer=_ref5.setToggleContainer;return/*#__PURE__*/_jsxs(\"div\",{className:\"channel-search__results\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__results-header\",children:\"Channels\"}),loading&&!teamChannels.length&&/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__results-header\",children:/*#__PURE__*/_jsx(\"i\",{children:\"Loading...\"})}),!loading&&!teamChannels.length?/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__results-header\",children:/*#__PURE__*/_jsx(\"i\",{children:\"No channels found\"})}):teamChannels===null||teamChannels===void 0?void 0:teamChannels.map(function(channel,i){return/*#__PURE__*/_jsx(SearchResult,{channel:channel,focusedId:focusedId,setChannel:setChannel,type:\"channel\",setToggleContainer:setToggleContainer},i);}),/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__results-header\",children:\"Users\"}),loading&&!directChannels.length&&/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__results-header\",children:/*#__PURE__*/_jsx(\"i\",{children:\"Loading...\"})}),!loading&&!directChannels.length?/*#__PURE__*/_jsx(\"p\",{className:\"channel-search__res ults-header\",children:/*#__PURE__*/_jsx(\"i\",{children:\"No direct messages found\"})}):directChannels===null||directChannels===void 0?void 0:directChannels.map(function(channel,i){return/*#__PURE__*/_jsx(SearchResult,{channel:channel,focusedId:focusedId,setChannel:setChannel,type:\"user\",setToggleContainer:setToggleContainer},i);})]});};export default ResultsDropdown;","map":{"version":3,"sources":["/home/rupak/Music/project_medical_pager_chat-master/client/src/components/ResultsDropdown.jsx"],"names":["React","Avatar","useChatContext","channelByUser","client","setActiveChannel","channel","setChannel","filters","type","member_count","members","$eq","user","id","userID","queryChannels","existingChannel","newChannel","SearchResult","focusedId","setToggleContainer","prevState","data","name","image","undefined","ResultsDropdown","teamChannels","directChannels","loading","length","map","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Avatar, useChatContext } from 'stream-chat-react';\n\nconst channelByUser = async ({ client, setActiveChannel, channel, setChannel }) => {\n  const filters = {\n    type: 'messaging',\n    member_count: 2,\n    members: { $eq: [client.user.id, client.userID] },\n  };\n\n  const [existingChannel] = await client.queryChannels(filters);\n\n  if (existingChannel) return setActiveChannel(existingChannel);\n\n  const newChannel = client.channel('messaging', { members: [channel.id, client.userID] });\n  \n  setChannel(newChannel)\n\n  return setActiveChannel(newChannel);\n};\n\nconst SearchResult = ({ channel, focusedId, type, setChannel, setToggleContainer }) => {\n  const { client, setActiveChannel } = useChatContext();\n\n  if (type === 'channel') {\n    return (\n      <div\n        onClick={() => {\n          setChannel(channel)\n          if(setToggleContainer) {\n            setToggleContainer((prevState) => !prevState)   \n          }\n        }}\n        className={focusedId === channel.id ? 'channel-search__result-container__focused' : 'channel-search__result-container' }\n      >\n        <div className='result-hashtag'>#</div>\n        <p className='channel-search__result-text'>{channel.data.name}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={async () => {\n        channelByUser({ client, setActiveChannel, channel, setChannel })\n        if(setToggleContainer) {\n            setToggleContainer((prevState) => !prevState)   \n        }\n      }}\n      className={focusedId === channel.id ? 'channel-search__result-container__focused' : 'channel-search__result-container' }\n    >\n      <div className='channel-search__result-user'>\n        <Avatar image={channel.image || undefined} name={channel.name} size={24} />\n        <p className='channel-search__result-text'>{channel.name}</p>\n      </div>\n    </div>\n  );\n};\n\nconst ResultsDropdown = ({ teamChannels, directChannels, focusedId, loading, setChannel, setToggleContainer }) => {\n\n  return (\n    <div className='channel-search__results'>\n      <p className='channel-search__results-header'>Channels</p>\n      {loading && !teamChannels.length && (\n        <p className='channel-search__results-header'>\n          <i>Loading...</i>\n        </p>\n      )}\n      {!loading && !teamChannels.length ? (\n        <p className='channel-search__results-header'>\n          <i>No channels found</i>\n        </p>\n      ) : (\n        teamChannels?.map((channel, i) => (\n          <SearchResult\n            channel={channel}\n            focusedId={focusedId}\n            key={i}\n            setChannel={setChannel}\n            type='channel'\n            setToggleContainer={setToggleContainer}\n          />\n        ))\n      )}\n      <p className='channel-search__results-header'>Users</p>\n      {loading && !directChannels.length && (\n        <p className='channel-search__results-header'>\n          <i>Loading...</i>\n        </p>\n      )}\n      {!loading && !directChannels.length ? (\n        <p className='channel-search__res ults-header'>\n          <i>No direct messages found</i>\n        </p>\n      ) : (\n        directChannels?.map((channel, i) => (\n          <SearchResult\n            channel={channel}\n            focusedId={focusedId}\n            key={i}\n            setChannel={setChannel}\n            type='user'\n            setToggleContainer={setToggleContainer}\n          />\n        ))\n      )}\n    </div>\n  );\n};\n\nexport default ResultsDropdown;"]},"metadata":{},"sourceType":"module"}