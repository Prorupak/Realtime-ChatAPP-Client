{"ast":null,"code":"import _regeneratorRuntime from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/rupak/Music/project_medical_pager_chat-master/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useChatContext}from'stream-chat-react';import{ResultsDropdown}from'./';import{SearchIcon}from'../assets';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChannelSearch=function ChannelSearch(_ref){var setToggleContainer=_ref.setToggleContainer;var _useChatContext=useChatContext(),client=_useChatContext.client,setActiveChannel=_useChatContext.setActiveChannel;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),teamChannels=_useState6[0],setTeamChannels=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),directChannels=_useState8[0],setDirectChannels=_useState8[1];useEffect(function(){if(!query){setTeamChannels([]);setDirectChannels([]);}},[query]);var getChannels=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(text){var channelResponse,userResponse,_yield$Promise$all,_yield$Promise$all2,channels,users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;channelResponse=client.queryChannels({type:'team',name:{$autocomplete:text},members:{$in:[client.userID]}});userResponse=client.queryUsers({id:{$ne:client.userID},name:{$autocomplete:text}});_context.next=5;return Promise.all([channelResponse,userResponse]);case 5:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);channels=_yield$Promise$all2[0];users=_yield$Promise$all2[1].users;if(channels.length)setTeamChannels(channels);if(users.length)setDirectChannels(users);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);setQuery('');case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function getChannels(_x){return _ref2.apply(this,arguments);};}();var onSearch=function onSearch(event){event.preventDefault();setLoading(true);setQuery(event.target.value);getChannels(event.target.value);};var setChannel=function setChannel(channel){setQuery('');setActiveChannel(channel);};return/*#__PURE__*/_jsxs(\"div\",{className:\"channel-search__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"channel-search__input__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"channel-serach__input__icon\",children:/*#__PURE__*/_jsx(SearchIcon,{})}),/*#__PURE__*/_jsx(\"input\",{className:\"channel-search__input__text\",placeholder:\"Search\",type:\"text\",value:query,onChange:onSearch})]}),query&&/*#__PURE__*/_jsx(ResultsDropdown,{teamChannels:teamChannels,directChannels:directChannels,loading:loading,setChannel:setChannel,setQuery:setQuery,setToggleContainer:setToggleContainer})]});};export default ChannelSearch;","map":{"version":3,"sources":["/home/rupak/Music/project_medical_pager_chat-master/client/src/components/ChannelSearch.jsx"],"names":["React","useState","useEffect","useChatContext","ResultsDropdown","SearchIcon","ChannelSearch","setToggleContainer","client","setActiveChannel","query","setQuery","loading","setLoading","teamChannels","setTeamChannels","directChannels","setDirectChannels","getChannels","text","channelResponse","queryChannels","type","name","$autocomplete","members","$in","userID","userResponse","queryUsers","id","$ne","Promise","all","channels","users","length","onSearch","event","preventDefault","target","value","setChannel","channel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useChatContext } from 'stream-chat-react';\n\nimport { ResultsDropdown } from './'\nimport { SearchIcon } from '../assets';\n\nconst ChannelSearch = ({ setToggleContainer }) => {\n    const { client, setActiveChannel } = useChatContext();\n    const [query, setQuery] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [teamChannels, setTeamChannels] = useState([])\n    const [directChannels, setDirectChannels] = useState([])\n\n    useEffect(() => {\n        if(!query) {\n            setTeamChannels([]);\n            setDirectChannels([]);\n        }\n    }, [query])\n\n    const getChannels = async (text) => {\n        try {\n            const channelResponse = client.queryChannels({\n                type: 'team', \n                name: { $autocomplete: text }, \n                members: { $in: [client.userID]}\n            });\n            const userResponse = client.queryUsers({\n                id: { $ne: client.userID },\n                name: { $autocomplete: text }\n            })\n\n            const [channels, { users }] = await Promise.all([channelResponse, userResponse]);\n\n            if(channels.length) setTeamChannels(channels);\n            if(users.length) setDirectChannels(users);\n        } catch (error) {\n            setQuery('')\n        }\n    }\n\n    const onSearch = (event) => {\n        event.preventDefault();\n\n        setLoading(true);\n        setQuery(event.target.value);\n        getChannels(event.target.value)\n    }\n\n    const setChannel = (channel) => {\n        setQuery('');\n        setActiveChannel(channel);\n    }\n\n    return (\n        <div className=\"channel-search__container\">\n            <div className=\"channel-search__input__wrapper\">\n                <div className=\"channel-serach__input__icon\">\n                    <SearchIcon />\n                </div>\n                <input \n                    className=\"channel-search__input__text\" \n                    placeholder=\"Search\" \n                    type=\"text\" \n                    value={query}  \n                    onChange={onSearch}\n                />\n            </div>\n            { query && (\n                <ResultsDropdown \n                    teamChannels={teamChannels}\n                    directChannels={directChannels}\n                    loading={loading}\n                    setChannel={setChannel}\n                    setQuery={setQuery}\n                    setToggleContainer={setToggleContainer}\n                />\n            )}\n        </div>\n    )\n}\n\nexport default ChannelSearch\n"]},"metadata":{},"sourceType":"module"}